
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>sed&awk · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-insert-logo/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-page-footer-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="linux命令练习.html" />
    
    
    <link rel="prev" href="linux管道命令.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="linux基础.html">
            
                <a href="linux基础.html">
            
                    
                    linux基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="linux磁盘管理.html">
            
                <a href="linux磁盘管理.html">
            
                    
                    linux磁盘管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="linux必会的50个命令.html">
            
                <a href="linux必会的50个命令.html">
            
                    
                    linux必会的50个命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="vim.html">
            
                <a href="vim.html">
            
                    
                    vim
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="linux常用软件安装.html">
            
                <a href="linux常用软件安装.html">
            
                    
                    linux常用软件安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="linux管道命令.html">
            
                <a href="linux管道命令.html">
            
                    
                    linux管道命令
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8" data-path="sed&awk.html">
            
                <a href="sed&awk.html">
            
                    
                    sed&awk
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="linux命令练习.html">
            
                <a href="linux命令练习.html">
            
                    
                    linux命令练习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Crontab定时任务.html">
            
                <a href="Crontab定时任务.html">
            
                    
                    Crontab定时任务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="shell编程.html">
            
                <a href="shell编程.html">
            
                    
                    shell编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="linux批量添加用户.html">
            
                <a href="linux批量添加用户.html">
            
                    
                    linux批量添加用户
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="找回root密码.html">
            
                <a href="找回root密码.html">
            
                    
                    找回root密码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="操作系统启动流程.html">
            
                <a href="操作系统启动流程.html">
            
                    
                    操作系统启动流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="虚拟机&命令行.html">
            
                <a href="虚拟机&命令行.html">
            
                    
                    虚拟机&命令行
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >sed&awk</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#cut&#x547D;&#x4EE4;"><b>1. </b>cut&#x547D;&#x4EE4;</a></li><li><span class="title-icon "></span><a href="#sed&#x547D;&#x4EE4;"><b>2. </b>sed&#x547D;&#x4EE4;</a></li><ul><li><span class="title-icon "></span><a href="#&#x5143;&#x5B57;&#x7B26;&#x96C6;"><b>2.1. </b>&#x5143;&#x5B57;&#x7B26;&#x96C6;</a></li><li><span class="title-icon "></span><a href="#ai&#x5728;&#x6307;&#x5B9A;&#x884C;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;&#x884C;"><b>2.2. </b>a|i:&#x5728;&#x6307;&#x5B9A;&#x884C;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;&#x884C;</a></li><li><span class="title-icon "></span><a href="#d&#x5220;&#x9664;&#x6307;&#x5B9A;&#x884C;"><b>2.3. </b>d:&#x5220;&#x9664;&#x6307;&#x5B9A;&#x884C;</a></li><li><span class="title-icon "></span><a href="#c&#x66FF;&#x6362;&#x6307;&#x5B9A;&#x884C;"><b>2.4. </b>c:&#x66FF;&#x6362;&#x6307;&#x5B9A;&#x884C;</a></li><li><span class="title-icon "></span><a href="#p&#x4EC5;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x884C;"><b>2.5. </b>p:&#x4EC5;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x884C;</a></li><li><span class="title-icon "></span><a href="#s&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;"><b>2.6. </b>s:&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;</a></li><li><span class="title-icon "></span><a href="#y&#x5355;&#x5B57;&#x7B26;&#x66FF;&#x6362;"><b>2.7. </b>y:&#x5355;&#x5B57;&#x7B26;&#x66FF;&#x6362;</a></li><li><span class="title-icon "></span><a href="#hhgg&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;"><b>2.8. </b>hHgG&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&amp;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;</a></li><li><span class="title-icon "></span><a href="#&#x591A;&#x6B21;&#x6307;&#x5B9A;-e&#x9009;&#x9879;&#x8FDB;&#x884C;&#x591A;&#x70B9;&#x7F16;&#x8F91;"><b>2.9. </b>&#x591A;&#x6B21;&#x6307;&#x5B9A;-e&#x9009;&#x9879;&#x8FDB;&#x884C;&#x591A;&#x70B9;&#x7F16;&#x8F91;</a></li><li><span class="title-icon "></span><a href="#&#x9009;&#x9879;-i&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x5185;&#x5BB9;"><b>2.10. </b>&#x9009;&#x9879;-i&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x5185;&#x5BB9;</a></li></ul><li><span class="title-icon "></span><a href="#awk&#x547D;&#x4EE4;"><b>3. </b>awk&#x547D;&#x4EE4;</a></li><ul><li><span class="title-icon "></span><a href="#&#x57FA;&#x672C;&#x7528;&#x6CD5;"><b>3.1. </b>&#x57FA;&#x672C;&#x7528;&#x6CD5;</a></li><ul><li><span class="title-icon "></span><a href="#f&#x6307;&#x5B9A;&#x5206;&#x5272;&#x5B57;&#x7B26;"><b>3.1.1. </b>-F&#x6307;&#x5B9A;&#x5206;&#x5272;&#x5B57;&#x7B26;</a></li><li><span class="title-icon "></span><a href="#v&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;"><b>3.1.2. </b>-v&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;</a></li><li><span class="title-icon "></span><a href="#f&#x6307;&#x5B9A;awk&#x811A;&#x672C;"><b>3.1.3. </b>-f&#x6307;&#x5B9A;awk&#x811A;&#x672C;</a></li></ul><li><span class="title-icon "></span><a href="#awk&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><b>3.2. </b>AWK&#x5DE5;&#x4F5C;&#x539F;&#x7406;</a></li><li><span class="title-icon "></span><a href="#&#x8FD0;&#x7B97;&#x7B26;"><b>3.3. </b>&#x8FD0;&#x7B97;&#x7B26;</a></li><ul><li><span class="title-icon "></span><a href="#&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x7684;&#x884C;"><b>3.3.1. </b>&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x7684;&#x884C;</a></li><li><span class="title-icon "></span><a href="#&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x7B49;&#x4E8E;2&#x7684;&#x884C;"><b>3.3.2. </b>&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x7B49;&#x4E8E;2&#x7684;&#x884C;</a></li><li><span class="title-icon "></span><a href="#&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x5E76;&#x4E14;&#x7B2C;&#x4E8C;&#x5217;&#x7B49;&#x4E8E;are&#x7684;&#x884C;"><b>3.3.3. </b>&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x5E76;&#x4E14;&#x7B2C;&#x4E8C;&#x5217;&#x7B49;&#x4E8E;&apos;Are&apos;&#x7684;&#x884C;</a></li></ul><li><span class="title-icon "></span><a href="#&#x5185;&#x5EFA;&#x53D8;&#x91CF;"><b>3.4. </b>&#x5185;&#x5EFA;&#x53D8;&#x91CF;</a></li><ul><li><span class="title-icon "></span><a href="#&#x8F93;&#x51FA;&#x987A;&#x5E8F;&#x53F7;-nr-&#x5339;&#x914D;&#x6587;&#x672C;&#x884C;&#x53F7;"><b>3.4.1. </b>&#x8F93;&#x51FA;&#x987A;&#x5E8F;&#x53F7; NR, &#x5339;&#x914D;&#x6587;&#x672C;&#x884C;&#x53F7;</a></li><li><span class="title-icon "></span><a href="#&#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x5206;&#x5272;&#x7B26;"><b>3.4.2. </b>&#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x5206;&#x5272;&#x7B26;</a></li><li><span class="title-icon "></span><a href="#&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;"><b>3.4.3. </b>&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;</a></li></ul><li><span class="title-icon "></span><a href="#&#x6B63;&#x5219;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;"><b>3.5. </b>&#x6B63;&#x5219;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;</a></li><li><span class="title-icon "></span><a href="#&#x4E00;&#x4E9B;&#x5B9E;&#x4F8B;"><b>3.6. </b>&#x4E00;&#x4E9B;&#x5B9E;&#x4F8B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x8BA1;&#x7B97;&#x6587;&#x4EF6;&#x5927;&#x5C0F;"><b>3.6.1. </b>&#x8BA1;&#x7B97;&#x6587;&#x4EF6;&#x5927;&#x5C0F;</a></li><li><span class="title-icon "></span><a href="#&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x51FA;&#x957F;&#x5EA6;&#x5927;&#x4E8E;80&#x7684;&#x884C;"><b>3.6.2. </b>&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x51FA;&#x957F;&#x5EA6;&#x5927;&#x4E8E;80&#x7684;&#x884C;</a></li><li><span class="title-icon "></span><a href="#&#x6253;&#x5370;&#x4E5D;&#x4E5D;&#x4E58;&#x6CD5;&#x8868;"><b>3.6.3. </b>&#x6253;&#x5370;&#x4E5D;&#x4E5D;&#x4E58;&#x6CD5;&#x8868;</a></li><li><span class="title-icon "></span><a href="#&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x5206;&#x6790;"><b>3.6.4. </b>&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x5206;&#x6790;</a></li></ul></ul><li><span class="title-icon "></span><a href="#awk&#x7F16;&#x7A0B;"><b>4. </b>awk&#x7F16;&#x7A0B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6761;&#x4EF6;&#x8BED;&#x53E5;ifelse"><b>4.1. </b>&#x6761;&#x4EF6;&#x8BED;&#x53E5;IF&amp;ELSE</a></li><li><span class="title-icon "></span><a href="#&#x5FAA;&#x73AF;&#x8BED;&#x53E5;forwhile"><b>4.2. </b>&#x5FAA;&#x73AF;&#x8BED;&#x53E5;For&amp;While</a></li><li><span class="title-icon "></span><a href="#awk&#x6570;&#x7EC4;"><b>4.3. </b>awk&#x6570;&#x7EC4;</a></li><li><span class="title-icon "></span><a href="#awk-&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;"><b>4.4. </b>AWK &#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;</a></li><li><span class="title-icon "></span><a href="#awk-&#x5185;&#x7F6E;&#x51FD;&#x6570;"><b>4.5. </b>AWK &#x5185;&#x7F6E;&#x51FD;&#x6570;</a></li><ul><li><span class="title-icon "></span><a href="#&#x7B97;&#x6570;&#x51FD;&#x6570;"><b>4.5.1. </b>&#x7B97;&#x6570;&#x51FD;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;"><b>4.5.2. </b>&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x65F6;&#x95F4;&#x51FD;&#x6570;"><b>4.5.3. </b>&#x65F6;&#x95F4;&#x51FD;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x4F4D;&#x64CD;&#x4F5C;&#x51FD;&#x6570;"><b>4.5.4. </b>&#x4F4D;&#x64CD;&#x4F5C;&#x51FD;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x5176;&#x4ED6;&#x51FD;&#x6570;"><b>4.5.5. </b>&#x5176;&#x4ED6;&#x51FD;&#x6570;</a></li></ul></ul></ul></div><a href="#cut&#x547D;&#x4EE4;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="cut&#x547D;&#x4EE4;"><a name="cut&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#cut&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>1. cut&#x547D;&#x4EE4;</h1>
<pre><code>&#x9009;&#x9879;&#x4E0E;&#x53C2;&#x6570;&#xFF1A;
-d  &#xFF1A;&#x540E;&#x9762;&#x63A5;&#x5206;&#x9694;&#x5B57;&#x7B26;&#x3002;&#x4E0E; -f &#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF1B;
-f  &#xFF1A;&#x4F9D;&#x636E; -d &#x7684;&#x5206;&#x9694;&#x5B57;&#x7B26;&#x5C06;&#x4E00;&#x6BB5;&#x4FE1;&#x606F;&#x5206;&#x5272;&#x6210;&#x4E3A;&#x6570;&#x6BB5;&#xFF0C;&#x7528; -f &#x53D6;&#x51FA;&#x7B2C;&#x51E0;&#x6BB5;&#x7684;&#x610F;&#x601D;&#xFF1B;
-c  &#xFF1A;&#x4EE5;&#x5B57;&#x7B26; (characters) &#x7684;&#x5355;&#x4F4D;&#x53D6;&#x51FA;&#x56FA;&#x5B9A;&#x5B57;&#x7B26;&#x533A;&#x95F4;&#xFF1B;
</code></pre><p>cut&#x4EE5;&#x884C;&#x4E3A;&#x5355;&#x4F4D;&#xFF0C;&#x6839;&#x636E;&#x5206;&#x9694;&#x7B26;&#x628A;&#x884C;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x5217;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9009;&#x53D6;&#x54EA;&#x4E9B;&#x5217;&#x4E86;&#x3002;</p>
<pre><code>cut -d &apos;&#x5206;&#x9694;&#x5B57;&#x7B26;&apos; -f &#x9009;&#x53D6;&#x7684;&#x5217;&#x6570;
echo $PATH|cut -d &apos;:&apos; -f 2      --&#x9009;&#x53D6;&#x7B2C;2&#x5217;
echo $PATH|cut -d &apos;:&apos; -f 3,5      --&#x9009;&#x53D6;&#x7B2C;3&#x5217;&#x548C;&#x7B2C;5&#x5217;
echo $PATH|cut -d &apos;:&apos; -f 3-5      --&#x9009;&#x53D6;&#x7B2C;3&#x5217;&#x5230;&#x7B2C;5&#x5217;
echo $PATH|cut -d &apos;:&apos; -f 3-       --&#x9009;&#x53D6;&#x7B2C;3&#x5217;&#x5230;&#x6700;&#x540E;1&#x5217;
echo $PATH|cut -d &apos;:&apos; -f 1-3,5    --&#x9009;&#x53D6;&#x7B2C;1&#x5230;&#x7B2C;3&#x5217;&#x8FD8;&#x6709;&#x7B2C;5&#x5217;
</code></pre><p>&#x53EA;&#x663E;&#x793A;/etc/passwd&#x7684;&#x7528;&#x6237;&#x548C;shell&#xFF1A;</p>
<pre><code>#cat /etc/passwd | cut -d &apos;:&apos; -f 1,7 
root:/bin/bash
daemon:/bin/sh
bin:/bin/sh
</code></pre><h1 id="sed&#x547D;&#x4EE4;"><a name="sed&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#sed&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>2. sed&#x547D;&#x4EE4;</h1>
<p>sed &#x53EF;&#x4F9D;&#x7167;&#x811A;&#x672C;&#x7684;&#x6307;&#x4EE4;&#x6765;&#x5904;&#x7406;&#x3001;&#x7F16;&#x8F91;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x3002;</p>
<p>Sed &#x4E3B;&#x8981;&#x7528;&#x6765;&#x81EA;&#x52A8;&#x7F16;&#x8F91;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x3001;&#x7B80;&#x5316;&#x5BF9;&#x6587;&#x4EF6;&#x7684;&#x53CD;&#x590D;&#x64CD;&#x4F5C;&#x3001;&#x7F16;&#x5199;&#x8F6C;&#x6362;&#x7A0B;&#x5E8F;&#x7B49;&#x3002;</p>
<p>&#x8BED;&#x6CD5;:</p>
<pre><code>sed [-e&lt;script&gt;][-f&lt;script&#x6587;&#x4EF6;&gt;][&#x6587;&#x672C;&#x6587;&#x4EF6;]
</code></pre><p><strong>&#x53C2;&#x6570;&#x8BF4;&#x660E;</strong>&#xFF1A;</p>
<ul>
<li><code>-e &lt;script&gt;</code>&#x4EE5;&#x6307;&#x5B9A;&#x7684;script&#x6765;&#x5904;&#x7406;&#x8F93;&#x5165;&#x7684;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x3002;</li>
<li><code>-f&lt;script&#x6587;&#x4EF6;&gt;</code>&#x4EE5;&#x6307;&#x5B9A;&#x7684;script&#x6587;&#x4EF6;&#x6765;&#x5904;&#x7406;&#x8F93;&#x5165;&#x7684;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x3002;</li>
<li><code>-n</code>&#x4EC5;&#x663E;&#x793A;script&#x5904;&#x7406;&#x540E;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4E00;&#x822C;&#x8DDF;p&#x52A8;&#x4F5C;&#x642D;&#x914D;&#x4F7F;&#x7528;&#x3002;</li>
<li><code>-i</code>&#x4F7F;&#x7528;&#x5904;&#x7406;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x3002;</li>
</ul>
<p><strong>&#x52A8;&#x4F5C;&#x8BF4;&#x660E;</strong>&#xFF1A;</p>
<ul>
<li>a&#xFF1A;&#x5728;&#x6307;&#x5B9A;&#x884C;&#x540E;&#x9762;&#x63D2;&#x5165;&#x5185;&#x5BB9;</li>
<li>i&#xFF1A;&#x5728;&#x6307;&#x5B9A;&#x884C;&#x524D;&#x9762;&#x63D2;&#x5165;&#x5185;&#x5BB9;</li>
<li>d&#xFF1A;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x884C;</li>
<li>c &#xFF1A;&#x66FF;&#x6362;&#x6307;&#x5B9A;&#x884C;</li>
<li>p &#xFF1A;&#x6253;&#x5370;&#x6307;&#x5B9A;&#x884C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x901A;&#x5E38;&#x9700;&#x8981;&#x8DDF;<code>-n</code>&#x9009;&#x9879;&#x642D;&#x914D;&#x4F7F;&#x7528;</li>
<li>s &#xFF1A;&#x66FF;&#x6362;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#xFF0C;&#x517C;&#x5BB9;vim&#x7684;&#x66FF;&#x6362;&#x8BED;&#x6CD5;&#xFF0C;&#x4F8B;&#x5982; 1,20s/old/new/g</li>
</ul>
<h2 id="&#x5143;&#x5B57;&#x7B26;&#x96C6;"><a name="&#x5143;&#x5B57;&#x7B26;&#x96C6;" class="anchor-navigation-ex-anchor" href="#&#x5143;&#x5B57;&#x7B26;&#x96C6;"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. &#x5143;&#x5B57;&#x7B26;&#x96C6;</h2>
<p>sed&#x652F;&#x6301;&#x4E00;&#x822C;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x652F;&#x6301;&#x7684;&#x6B63;&#x5219;&#x8BED;&#x6CD5;&#xFF1A;
<code>^</code>&#x884C;&#x7684;&#x5F00;&#x59CB; &#x5982;&#xFF1A;/^sed/&#x5339;&#x914D;&#x6240;&#x6709;&#x4EE5;sed&#x5F00;&#x5934;&#x7684;&#x884C;&#x3002; 
<code>$</code>&#x884C;&#x7684;&#x7ED3;&#x675F; &#x5982;&#xFF1A;/sed$/&#x5339;&#x914D;&#x6240;&#x6709;&#x4EE5;sed&#x7ED3;&#x5C3E;&#x7684;&#x884C;&#x3002; 
<code>.</code>&#x5339;&#x914D;&#x4E00;&#x4E2A;&#x975E;&#x6362;&#x884C;&#x7B26;&#x7684;&#x4EFB;&#x610F;&#x5B57;&#x7B26; &#x5982;&#xFF1A;/s.d/&#x5339;&#x914D;s&#x540E;&#x63A5;&#x4E00;&#x4E2A;&#x4EFB;&#x610F;&#x5B57;&#x7B26;&#xFF0C;&#x7136;&#x540E;&#x662F;d&#x3002; 
<code>*</code>&#x5339;&#x914D;&#x96F6;&#x6216;&#x591A;&#x4E2A;&#x5B57;&#x7B26; &#x5982;&#xFF1A;/<em>sed/&#x5339;&#x914D;&#x6240;&#x6709;&#x6A21;&#x677F;&#x662F;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7A7A;&#x683C;&#x540E;&#x7D27;&#x8DDF;sed&#x7684;&#x884C;&#x3002; 
<code>[]</code>&#x5339;&#x914D;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x5185;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x5982;<code>/[Ss]ed/</code>&#x5339;&#x914D;sed&#x548C;Sed&#x3002; 
<code>[^]</code>&#x5339;&#x914D;&#x4E00;&#x4E2A;&#x4E0D;&#x5728;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x5185;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x5982;&#xFF1A;<code>/[^A-RT-Z]ed/</code>&#x5339;&#x914D;&#x4E0D;&#x5305;&#x542B;A-R&#x548C;T-Z&#x7684;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#x5F00;&#x5934;&#xFF0C;&#x7D27;&#x8DDF;ed&#x7684;&#x884C;&#x3002; 
<code>\(..\)</code>&#x4FDD;&#x5B58;&#x5339;&#x914D;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x5982;s/(love)able/\1rs&#xFF0C;loveable&#x88AB;&#x66FF;&#x6362;&#x6210;lovers&#x3002; 
<code>&amp;</code>&#x4FDD;&#x5B58;&#x641C;&#x7D22;&#x5B57;&#x7B26;&#x7528;&#x6765;&#x66FF;&#x6362;&#x5176;&#x4ED6;&#x5B57;&#x7B26;&#xFF0C;&#x5982;<code>s/love/**&amp;**/</code>&#xFF0C;love&#x8FD9;&#x6210;`<em>*love</em></em><code>&#x3002;</code>\&lt;<code>&#x5355;&#x8BCD;&#x7684;&#x5F00;&#x59CB;&#xFF0C;&#x5982;:/\&lt;love/&#x5339;&#x914D;&#x5305;&#x542B;&#x4EE5;love&#x5F00;&#x5934;&#x7684;&#x5355;&#x8BCD;&#x7684;&#x884C;&#x3002;</code>&gt;<code>&#x5355;&#x8BCD;&#x7684;&#x7ED3;&#x675F;&#xFF0C;&#x5982;/love\&gt;/&#x5339;&#x914D;&#x5305;&#x542B;&#x4EE5;love&#x7ED3;&#x5C3E;&#x7684;&#x5355;&#x8BCD;&#x7684;&#x884C;&#x3002;</code>x+<code>&#x91CD;&#x590D;&#x5B57;&#x7B26;x&#xFF0C;&#x81F3;&#x5C11;1&#x6B21;&#xFF0C;&#x5982;&#xFF1A;</code>/o+/<code>&#x5339;&#x914D;&#x81F3;&#x5C11;&#x6709;1&#x4E2A;o&#x7684;&#x884C;&#x3002;</code>x{m}<code>&#x91CD;&#x590D;&#x5B57;&#x7B26;x&#xFF0C;m&#x6B21;&#xFF0C;&#x5982;&#xFF1A;</code>/o{5}/<code>&#x5339;&#x914D;&#x5305;&#x542B;5&#x4E2A;o&#x7684;&#x884C;&#x3002;</code>x{m,}<code>&#x91CD;&#x590D;&#x5B57;&#x7B26;x,&#x81F3;&#x5C11;m&#x6B21;&#xFF0C;&#x5982;&#xFF1A;</code>/o{5,}/<code>&#x5339;&#x914D;&#x81F3;&#x5C11;&#x6709;5&#x4E2A;o&#x7684;&#x884C;&#x3002;</code>x{m,n}<code>&#x91CD;&#x590D;&#x5B57;&#x7B26;x&#xFF0C;&#x81F3;&#x5C11;m&#x6B21;&#xFF0C;&#x4E0D;&#x591A;&#x4E8E;n&#x6B21;&#xFF0C;&#x5982;&#xFF1A;</code>/o{5,10}/`&#x5339;&#x914D;5-10&#x4E2A;o&#x7684;&#x884C;&#x3002;</p>
<h2 id="ai&#x5728;&#x6307;&#x5B9A;&#x884C;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;&#x884C;"><a name="ai&#x5728;&#x6307;&#x5B9A;&#x884C;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;&#x884C;" class="anchor-navigation-ex-anchor" href="#ai&#x5728;&#x6307;&#x5B9A;&#x884C;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. a|i:&#x5728;&#x6307;&#x5B9A;&#x884C;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;&#x884C;</h2>
<pre><code>python@xxx:~/test$ cat testfile              
 LINUX!  
 Linux is a free unix-type opterating system.  
 This is a linux testfile!  
 Linux test 

python@xxx:~/test$ sed -e 2a\newline testfile 
 LINUX!  
 Linux is a free unix-type opterating system.  
newline
 This is a linux testfile!  
 Linux test
</code></pre><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;<code>-e</code>&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ cat testfile|sed &apos;2a\newline&apos;
 LINUX!  
 Linux is a free unix-type opterating system.  
newline
 This is a linux testfile!  
 Linux test 

python@xxx:~/test$ sed &apos;2a newline&apos; testfile
 LINUX!  
 Linux is a free unix-type opterating system.  
newline
 This is a linux testfile!  
 Linux test
</code></pre><p><code>&lt;script&gt;</code>&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x6700;&#x597D;&#x7528;&#x5355;&#x5F15;&#x53F7;&#x62EC;&#x8D77;&#x6765;&#xFF0C;&#x5982;&#x679C;&#x811A;&#x672C;&#x5185;&#x5BB9;&#x4E0D;&#x5B58;&#x5728;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x4E5F;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x5355;&#x5F15;&#x53F7;&#x3002;</p>
<p>&#x5728;&#x7B2C;&#x4E8C;&#x884C;&#x4E4B;&#x524D;&#x6DFB;&#x52A0;&#x4E00;&#x884C;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ sed &apos;2i newline&apos; testfile 
 LINUX!  
newline
 Linux is a free unix-type opterating system.  
 This is a linux testfile!  
 Linux test
</code></pre><p>&#x6700;&#x540E;&#x4E00;&#x884C;&#x52A0;&#x5165; <code># This is a test</code>:</p>
<pre><code>python@xxx:~/test$ sed &apos;$a # This is a test&apos; testfile 
 LINUX!  
 Linux is a free unix-type opterating system.  
 This is a linux testfile!  
 Linux test 
# This is a test
</code></pre><p>&#x540C;&#x65F6;&#x6DFB;&#x52A0;&#x591A;&#x884C;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ cat testfile|sed &apos;2a\newline1\
&gt; newline2&apos;
 LINUX!  
 Linux is a free unix-type opterating system.  
newline1
newline2
 This is a linux testfile!  
 Linux test
</code></pre><h2 id="d&#x5220;&#x9664;&#x6307;&#x5B9A;&#x884C;"><a name="d&#x5220;&#x9664;&#x6307;&#x5B9A;&#x884C;" class="anchor-navigation-ex-anchor" href="#d&#x5220;&#x9664;&#x6307;&#x5B9A;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. d:&#x5220;&#x9664;&#x6307;&#x5B9A;&#x884C;</h2>
<p>&#x5C06; /etc/passwd &#x7684;&#x5185;&#x5BB9;&#x5217;&#x51FA;&#x884C;&#x53F7;&#xFF0C;&#x5E76;&#x5C06;&#x7B2C; 2~5 &#x884C;&#x5220;&#x9664;&#xFF01;</p>
<pre><code>[root@www ~]# nl /etc/passwd | sed &apos;2,5d&apos;
1 root:x:0:0:root:/root:/bin/bash
6 sync:x:5:0:sync:/sbin:/bin/sync
7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
.....(&#x540E;&#x9762;&#x7701;&#x7565;).....
</code></pre><p>&#x53EA;&#x5220;&#x9664;&#x7B2C;2&#x884C;&#xFF1A;</p>
<pre><code>nl /etc/passwd | sed &apos;2d&apos;
</code></pre><p>&#x5220;&#x9664;&#x7B2C;3&#x5230;&#x6700;&#x540E;&#x4E00;&#x884C;&#xFF1A;</p>
<pre><code>nl /etc/passwd | sed &apos;3,$d&apos;
</code></pre><p>&#x5220;&#x9664;/etc/passwd&#x6240;&#x6709;&#x5305;&#x542B;<code>/usr/sbin/nologin</code>&#x7684;&#x884C;&#xFF0C;&#x5176;&#x4ED6;&#x884C;&#x8F93;&#x51FA;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ nl /etc/passwd | sed  &apos;/\/usr\/sbin\/nologin/d&apos;
1  root:x:0:0:root:/root:/bin/bash
5  sync:x:4:65534:sync:/bin:/bin/sync
19  systemd-timesync:x:100:102:systemd Time Synchronization,,,:/run/systemd:/bin/false
20  systemd-network:x:101:103:systemd Network Management,,,:/run/systemd/netif:/bin/false
....&#x4E0B;&#x9762;&#x5FFD;&#x7565;
</code></pre><h2 id="c&#x66FF;&#x6362;&#x6307;&#x5B9A;&#x884C;"><a name="c&#x66FF;&#x6362;&#x6307;&#x5B9A;&#x884C;" class="anchor-navigation-ex-anchor" href="#c&#x66FF;&#x6362;&#x6307;&#x5B9A;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>2.4. c:&#x66FF;&#x6362;&#x6307;&#x5B9A;&#x884C;</h2>
<p>&#x5C06;&#x7B2C;2-5&#x884C;&#x7684;&#x5185;&#x5BB9;&#x66FF;&#x6362;&#x6210;&#x4E3A;&#x300E;No 2-5 number&#x300F;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ nl /etc/passwd | sed &apos;2,5c No 2-5 number&apos;
1  root:x:0:0:root:/root:/bin/bash
No 2-5 number
6  games:x:5:60:games:/usr/games:/usr/sbin/nologin
.....(&#x540E;&#x9762;&#x7701;&#x7565;).....
</code></pre><h2 id="p&#x4EC5;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x884C;"><a name="p&#x4EC5;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x884C;" class="anchor-navigation-ex-anchor" href="#p&#x4EC5;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>2.5. p:&#x4EC5;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x884C;</h2>
<p>&#x4E0D;&#x52A0;<code>-n</code>&#x9009;&#x9879;&#x65F6;&#xFF0C;&#x9664;&#x4E86;&#x8F93;&#x51FA;&#x5339;&#x914D;&#x884C;&#xFF0C;&#x8FD8;&#x540C;&#x65F6;&#x4F1A;&#x8F93;&#x51FA;&#x6240;&#x6709;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x52A0;<code>-n</code>&#x9009;&#x9879;&#x3002;</p>
<p>&#x4EC5;&#x5217;&#x51FA; /etc/passwd &#x6587;&#x4EF6;&#x5185;&#x7684;&#x7B2C; 5-7 &#x884C;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ nl /etc/passwd | sed -n &apos;5,7p&apos;
5  sync:x:4:65534:sync:/bin:/bin/sync
6  games:x:5:60:games:/usr/games:/usr/sbin/nologin
7  man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
</code></pre><p>&#x641C;&#x7D22; /etc/passwd&#x6709;root&#x5173;&#x952E;&#x5B57;&#x7684;&#x884C;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ cat /etc/passwd | sed -n &apos;/root/p&apos;  
root:x:0:0:root:/root:/bin/bash
python@xxx:~/test$ sed -n &apos;/root/p&apos; /etc/passwd      
root:x:0:0:root:/root:/bin/bash
</code></pre><p>&#x6253;&#x5370;/etc/passwd&#x6709;&#x4EE5;root&#x548C;bin&#x5F00;&#x5934;&#x4E4B;&#x95F4;&#x7684;&#x884C;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ cat /etc/passwd | sed -n &apos;/^root/,/^bin/p&apos;
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
</code></pre><p>&#x6253;&#x5370;&#x4ECE;&#x7B2C;&#x4E94;&#x884C;&#x5F00;&#x59CB;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x4EE5;<code>/var/mail</code>&#x5F00;&#x59CB;&#x7684;&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x6240;&#x6709;&#x884C;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ nl /etc/passwd | sed -n &apos;5,\/var\/mail/p&apos;   
     5  sync:x:4:65534:sync:/bin:/bin/sync
     6  games:x:5:60:games:/usr/games:/usr/sbin/nologin
     7  man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
     8  lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
     9  mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
</code></pre><h2 id="s&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;"><a name="s&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;" class="anchor-navigation-ex-anchor" href="#s&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6. s:&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;</h2>
<p>&#x8BED;&#x6CD5;&#xFF1A;</p>
<pre><code>sed &apos;s/&#x8981;&#x88AB;&#x53D6;&#x4EE3;&#x7684;&#x5B57;&#x4E32;/&#x65B0;&#x7684;&#x5B57;&#x4E32;/g&apos;
</code></pre><p>&#x4E0D;&#x8BBA;&#x4EC0;&#x4E48;&#x5B57;&#x7B26;&#xFF0C;&#x7D27;&#x8DDF;&#x7740;s&#x547D;&#x4EE4;&#x7684;&#x90FD;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x65B0;&#x7684;&#x5206;&#x9694;&#x7B26;.</p>
<p><code>sed &apos;s#10#100#g&apos;</code>&#x8868;&#x793A;&#x628A;&#x6240;&#x6709;10&#x66FF;&#x6362;&#x6210;100&#xFF0C;&#x201C;#&#x201D;&#x5728;&#x8FD9;&#x91CC;&#x662F;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x4EE3;&#x66FF;&#x4E86;&#x9ED8;&#x8BA4;&#x7684;&#x201C;/&#x201D;&#x5206;&#x9694;&#x7B26;&#x3002;</p>
<p>&#x63D0;&#x53D6;&#x672C;&#x673A;&#x6240;&#x6709;&#x7684;ip&#x5730;&#x5740;&#xFF1A;</p>
<pre><code>[root@VM_0_9_centos ~]# ifconfig | grep &apos;inet &apos;
        inet 172.16.0.9  netmask 255.255.240.0  broadcast 172.16.15.255
        inet 127.0.0.1  netmask 255.0.0.0
[root@VM_0_9_centos ~]# ifconfig | grep &apos;inet &apos;|sed &apos;s/^[^0-9]*\([0-9\.]*\).*$/\1/g&apos;
172.16.0.9
127.0.0.1
</code></pre><p>&#x5BF9;&#x4E8E;&#x4EE5;root&#x548C;bin&#x5F00;&#x5934;&#x4E4B;&#x95F4;&#x7684;&#x884C;&#xFF0C;&#x6BCF;&#x884C;&#x7684;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;sed test&#xFF1A;</p>
<pre><code>python@xxx:~/test$ cat /etc/passwd | sed &apos;/^root/,/^bin/s/$/--sed test/&apos;  
root:x:0:0:root:/root:/bin/bash--sed test
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin--sed test
bin:x:2:2:bin:/bin:/usr/sbin/nologin--sed test
sys:x:3:3:sys:/dev:/usr/sbin/nologin
</code></pre><h2 id="y&#x5355;&#x5B57;&#x7B26;&#x66FF;&#x6362;"><a name="y&#x5355;&#x5B57;&#x7B26;&#x66FF;&#x6362;" class="anchor-navigation-ex-anchor" href="#y&#x5355;&#x5B57;&#x7B26;&#x66FF;&#x6362;"><i class="fa fa-link" aria-hidden="true"></i></a>2.7. y:&#x5355;&#x5B57;&#x7B26;&#x66FF;&#x6362;</h2>
<p>&#x8DDF;s&#x4E00;&#x6837;&#x4E5F;&#x7528;&#x4E8E;&#x66FF;&#x6362;&#xFF0C;&#x4E0D;&#x8FC7;s&#x66FF;&#x6362;&#x7684;&#x662F;&#x6574;&#x4F53;&#xFF0C;y&#x66FF;&#x6362;&#x7684;&#x662F;&#x6BCF;&#x4E00;&#x5B57;&#x6BCD;&#x5BF9;&#x5E94;&#x7684;&#x5355;&#x4E2A;&#x5B57;&#x6BCD;</p>
<p>&#x628A;data&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x884C;&#x81F3;&#x7B2C;&#x4E09;&#x884C;&#x4E2D;&#x7684;a&#x66FF;&#x6362;&#x6210;A&#xFF0C;b&#x66FF;&#x6362;&#x6210;B&#xFF0C;c&#x66FF;&#x6362;&#x6210;C&#xFF1A;</p>
<pre><code>sed &apos;1,3y/abc/ABC/&apos; data
</code></pre><p>&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ echo &quot;123&quot; | sed &apos;y/13/34/&apos; 
324
python@ubuntu:~/test$ echo &quot;axxbxxcxx&quot; | sed &apos;y/abc/123/&apos;
1xx2xx3xx
</code></pre><h2 id="hhgg&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;"><a name="hhgg&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;" class="anchor-navigation-ex-anchor" href="#hhgg&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>2.8. hHgG&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&amp;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;</h2>
<p>h&#x547D;&#x4EE4;&#x662F;&#x5C06;&#x5F53;&#x524D;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x5185;&#x5BB9;&#x8986;&#x76D6;&#x81F3;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#xFF0C;H&#x547D;&#x4EE4;&#x662F;&#x5C06;&#x5F53;&#x524D;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x8FFD;&#x52A0;&#x81F3;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;</p>
<p>g&#x547D;&#x4EE4;&#x662F;&#x5C06;&#x5F53;&#x524D;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#x4E2D;&#x5185;&#x5BB9;&#x8986;&#x76D6;&#x81F3;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF0C;G&#x547D;&#x4EE4;&#x662F;&#x5C06;&#x5F53;&#x524D;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x8FFD;&#x52A0;&#x81F3;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;</p>
<p>&#x6A21;&#x62DF;tac&#x547D;&#x4EE4;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ cat log.txt 
2 this is a test
3 Are you like awk
This&apos;s a test
10 There are orange,apple,mongo
python@ubuntu:~/test$ cat log.txt |sed &apos;1!G;h;$!d&apos;
10 There are orange,apple,mongo
This&apos;s a test
3 Are you like awk
2 this is a test
</code></pre><p>1!G&#x7B2C;1&#x884C;&#x4E0D; &#x6267;&#x884C;&#x201C;G&#x201D;&#x547D;&#x4EE4;&#xFF0C;&#x4ECE;&#x7B2C;2&#x884C;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x3002;</p>
<p>$!d&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x884C;&#x4E0D;&#x5220;&#x9664;&#xFF08;&#x4FDD;&#x7559;&#x6700;&#x540E;1&#x884C;&#xFF09;</p>
<p>&#x4E0B;&#x56FE;P&#x8868;&#x793A;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF0C;H&#x4EE3;&#x8868;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#xFF1A;</p>
<p><img src="imgs/sed-hg.png" alt="img"></p>
<p>&#x9012;&#x589E;&#x5E8F;&#x5217;&#xFF1A; </p>
<pre><code>python@ubuntu:~/test$ seq 3
1
2
3
python@ubuntu:~/test$ seq 3|sed &apos;H;g&apos;
1

1
2

1
2
3
</code></pre><h2 id="&#x591A;&#x6B21;&#x6307;&#x5B9A;-e&#x9009;&#x9879;&#x8FDB;&#x884C;&#x591A;&#x70B9;&#x7F16;&#x8F91;"><a name="&#x591A;&#x6B21;&#x6307;&#x5B9A;-e&#x9009;&#x9879;&#x8FDB;&#x884C;&#x591A;&#x70B9;&#x7F16;&#x8F91;" class="anchor-navigation-ex-anchor" href="#&#x591A;&#x6B21;&#x6307;&#x5B9A;-e&#x9009;&#x9879;&#x8FDB;&#x884C;&#x591A;&#x70B9;&#x7F16;&#x8F91;"><i class="fa fa-link" aria-hidden="true"></i></a>2.9. &#x591A;&#x6B21;&#x6307;&#x5B9A;-e&#x9009;&#x9879;&#x8FDB;&#x884C;&#x591A;&#x70B9;&#x7F16;&#x8F91;</h2>
<p>&#x5220;&#x9664;/etc/passwd&#x7B2C;&#x4E09;&#x884C;&#x5230;&#x672B;&#x5C3E;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x628A;bash&#x66FF;&#x6362;&#x4E3A;blueshell&#xFF1A;</p>
<pre><code>nl /etc/passwd | sed -e &apos;3,$d&apos; -e &apos;s/bash/blueshell/&apos;
1  root:x:0:0:root:/root:/bin/blueshell
2  daemon:x:1:1:daemon:/usr/sbin:/bin/sh
</code></pre><p>&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4EE5;#&#x5F00;&#x5934;&#x7684;&#x884C;&#x548C;&#x7A7A;&#x884C;&#xFF1A;</p>
<pre><code>python@xxx:~/test$ nl abc -ba
     1
     2  b
     3  a
     4
     5  # aaaa
     6
     7  ddd
     8
     9  # sss
    10  eeee
    11
python@xxx:~/test$ sed -e &apos;/^#/d&apos; -e &apos;/^$/d&apos; abc
b
a
ddd
eeee
</code></pre><p>&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>;</code>&#x5B9E;&#x73B0;</p>
<pre><code>python@ubuntu:~/test$ nl /etc/passwd | sed &apos;3,$d;s/bash/blueshell/&apos;
     1  root:x:0:0:root:/root:/bin/blueshell
     2  daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
python@ubuntu:~/test$ sed &apos;/^#/d;/^$/d&apos; abc
b
a
ddd
eeee
</code></pre><h2 id="&#x9009;&#x9879;-i&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x5185;&#x5BB9;"><a name="&#x9009;&#x9879;-i&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x5185;&#x5BB9;" class="anchor-navigation-ex-anchor" href="#&#x9009;&#x9879;-i&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x5185;&#x5BB9;"><i class="fa fa-link" aria-hidden="true"></i></a>2.10. &#x9009;&#x9879;-i&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x5185;&#x5BB9;</h2>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;sed&#x547D;&#x4EE4;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x5C06;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x663E;&#x793A;&#x5728;&#x63A7;&#x5236;&#x53F0;&#xFF0C;&#x52A0;<code>-i</code>&#x9009;&#x9879;&#x5219;&#x4F1A;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x5C06; regular_express.txt &#x5185;&#x6BCF;&#x4E00;&#x884C;&#x7ED3;&#x5C3E;&#x82E5;&#x4E3A; . &#x5219;&#x6362;&#x6210; !</p>
<pre><code>[root@www ~]# cat regular_express.txt 
taobao.
google.
taobao.
facebook.
zhihu-
weibo-
[root@www ~]# sed -i &apos;s/\.$/\!/g&apos; regular_express.txt
[root@www ~]# cat regular_express.txt 
taobao!
google!
taobao!
facebook!
zhihu-
weibo-
</code></pre><h1 id="awk&#x547D;&#x4EE4;"><a name="awk&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#awk&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>3. awk&#x547D;&#x4EE4;</h1>
<p>AWK&#x662F;&#x4E00;&#x79CD;&#x5904;&#x7406;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5F3A;&#x5927;&#x7684;&#x6587;&#x672C;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x3002;</p>
<p>&#x4E4B;&#x6240;&#x4EE5;&#x53EB;AWK&#x662F;&#x56E0;&#x4E3A;&#x5176;&#x53D6;&#x4E86;&#x4E09;&#x4F4D;&#x521B;&#x59CB;&#x4EBA; Alfred Aho&#xFF0C;Peter Weinberger, &#x548C; Brian Kernighan &#x7684; Family Name &#x7684;&#x9996;&#x5B57;&#x7B26;&#x3002;</p>
<p>&#x8BED;&#x6CD5;&#xFF1A;</p>
<pre><code>awk [&#x9009;&#x9879;&#x53C2;&#x6570;] &apos;script&apos; var=value file(s)
&#x6216;
awk [&#x9009;&#x9879;&#x53C2;&#x6570;] -f scriptfile var=value file(s)
</code></pre><p><strong>&#x9009;&#x9879;&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;</strong></p>
<ul>
<li>-F fs or --field-separator fs
&#x6307;&#x5B9A;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x6298;&#x5206;&#x9694;&#x7B26;&#xFF0C;fs&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x8005;&#x662F;&#x4E00;&#x4E2A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5982;-F:&#x3002;</li>
<li>-v var=value or --asign var=value
&#x8D4B;&#x503C;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#x3002;</li>
<li>-f scripfile or --file scriptfile
&#x4ECE;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;awk&#x547D;&#x4EE4;&#x3002;</li>
</ul>
<h2 id="&#x57FA;&#x672C;&#x7528;&#x6CD5;"><a name="&#x57FA;&#x672C;&#x7528;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#&#x57FA;&#x672C;&#x7528;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1. &#x57FA;&#x672C;&#x7528;&#x6CD5;</h2>
<pre><code>awk &apos;{[pattern] action}&apos; file
</code></pre><p>&#x6BCF;&#x884C;&#x6309;&#x7A7A;&#x683C;&#x6216;TAB&#x5206;&#x5272;&#xFF0C;&#x8F93;&#x51FA;&#x6587;&#x672C;&#x4E2D;&#x7684;1&#x3001;4&#x5217;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ cat log.txt 
2 this is a test
3 Are you like awk
This&apos;s a test
10 There are orange,apple,mongo
python@ubuntu:~/test$ awk &apos;{print $1,$4}&apos; log.txt
2 a
3 like
This&apos;s 
10 orange,apple,mongo
</code></pre><p>&#x683C;&#x5F0F;&#x5316;&#x8F93;&#x51FA;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;{printf &quot;%-8s %-10s\n&quot;,$1,$4}&apos; log.txt
2        a         
3        like      
This&apos;s
</code></pre><h3 id="f&#x6307;&#x5B9A;&#x5206;&#x5272;&#x5B57;&#x7B26;"><a name="f&#x6307;&#x5B9A;&#x5206;&#x5272;&#x5B57;&#x7B26;" class="anchor-navigation-ex-anchor" href="#f&#x6307;&#x5B9A;&#x5206;&#x5272;&#x5B57;&#x7B26;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.1. -F&#x6307;&#x5B9A;&#x5206;&#x5272;&#x5B57;&#x7B26;</h3>
<pre><code>awk -F  #-F&#x76F8;&#x5F53;&#x4E8E;&#x5185;&#x7F6E;&#x53D8;&#x91CF;FS, &#x6307;&#x5B9A;&#x5206;&#x5272;&#x5B57;&#x7B26;
</code></pre><p>&#x4F7F;&#x7528;:&#x5206;&#x5272;,&#x53D6;/etc/passwd&#x6587;&#x4EF6;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x5BF9;&#x5E94;shell&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk -F: &apos;{print $1,$7}&apos;  /etc/passwd 
root /bin/bash
daemon /usr/sbin/nologin
bin /usr/sbin/nologin
sys /usr/sbin/nologin
sync /bin/sync
# &#x6216;&#x8005;&#x4F7F;&#x7528;&#x5185;&#x5EFA;&#x53D8;&#x91CF;
python@ubuntu:~/test$ awk &apos;BEGIN{FS=&quot;:&quot;} {print $1,$7}&apos;  /etc/passwd  
root /bin/bash
daemon /usr/sbin/nologin
bin /usr/sbin/nologin
</code></pre><p>&#x540C;&#x65F6;&#x4F7F;&#x7528;:&#x548C;/l&#x4E24;&#x4E2A;&#x5206;&#x9694;&#x7B26;&#x5206;&#x5272;/etc/passwd&#x6587;&#x4EF6;</p>
<pre><code>python@ubuntu:~/test$ awk -F &apos;[:\/]&apos; &apos;{print $1,$7}&apos;  /etc/passwd      
root root
daemon usr
bin bin
</code></pre><h3 id="v&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;"><a name="v&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;" class="anchor-navigation-ex-anchor" href="#v&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.2. -v&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;</h3>
<pre><code>awk -v  # &#x8BBE;&#x7F6E;&#x53D8;&#x91CF;
</code></pre><p>&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ cat log.txt 
2 this is a test
3 Are you like awk
This&apos;s a test
10 There are orange,apple,mongo
python@ubuntu:~/test$ awk -va=1 &apos;{print $1,$1+a}&apos; log.txt
2 3
3 4
This&apos;s 1
10 11
python@ubuntu:~/test$ awk -va=1 -vb=s &apos;{print $1,$1+a,$1b}&apos; log.txt
2 3 2s
3 4 3s
This&apos;s 1 This&apos;ss
10 11 10s
</code></pre><h3 id="f&#x6307;&#x5B9A;awk&#x811A;&#x672C;"><a name="f&#x6307;&#x5B9A;awk&#x811A;&#x672C;" class="anchor-navigation-ex-anchor" href="#f&#x6307;&#x5B9A;awk&#x811A;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.3. -f&#x6307;&#x5B9A;awk&#x811A;&#x672C;</h3>
<pre><code>awk -f {awk&#x811A;&#x672C;} {&#x6587;&#x4EF6;&#x540D;}
</code></pre><p>&#x811A;&#x672C;&#x6A21;&#x5757;&#xFF1A;</p>
<ul>
<li>BEGIN{ &#x8FD9;&#x91CC;&#x9762;&#x653E;&#x7684;&#x662F;&#x6267;&#x884C;&#x524D;&#x7684;&#x8BED;&#x53E5; }</li>
<li>END {&#x8FD9;&#x91CC;&#x9762;&#x653E;&#x7684;&#x662F;&#x5904;&#x7406;&#x5B8C;&#x6240;&#x6709;&#x7684;&#x884C;&#x540E;&#x8981;&#x6267;&#x884C;&#x7684;&#x8BED;&#x53E5; }</li>
<li>{&#x8FD9;&#x91CC;&#x9762;&#x653E;&#x7684;&#x662F;&#x5904;&#x7406;&#x6BCF;&#x4E00;&#x884C;&#x65F6;&#x8981;&#x6267;&#x884C;&#x7684;&#x8BED;&#x53E5;}</li>
</ul>
<p>&#x5047;&#x8BBE;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF08;&#x5B66;&#x751F;&#x6210;&#x7EE9;&#x8868;&#xFF09;&#xFF1A;</p>
<pre><code>$ cat score.txt
Marry   2143 78 84 77
Jack    2321 66 78 45
Tom     2122 48 77 71
Mike    2537 87 97 95
Bob     2415 40 57 62
</code></pre><p>awk&#x811A;&#x672C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>$ cat cal.awk
#!/bin/awk -f
#&#x8FD0;&#x884C;&#x524D;
BEGIN {
    math = 0
    english = 0
    computer = 0

    printf &quot;NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL\n&quot;
    printf &quot;---------------------------------------------\n&quot;
}
#&#x8FD0;&#x884C;&#x4E2D;
{
    math+=$3
    english+=$4
    computer+=$5
    printf &quot;%-6s %-6s %4d %8d %8d %8d\n&quot;, $1,$2,$3,$4,$5,$3+$4+$5
}
#&#x8FD0;&#x884C;&#x540E;
END {
    printf &quot;---------------------------------------------\n&quot;
    printf &quot;  TOTAL:%10d %8d %8d \n&quot;, math, english, computer
    printf &quot;AVERAGE:%10.2f %8.2f %8.2f\n&quot;, math/NR, english/NR, computer/NR
}
</code></pre><p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x6267;&#x884C;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre><code>$ awk -f cal.awk score.txt
NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL
---------------------------------------------
Marry  2143     78       84       77      239
Jack   2321     66       78       45      189
Tom    2122     48       77       71      196
Mike   2537     87       97       95      279
Bob    2415     40       57       62      159
---------------------------------------------
  TOTAL:       319      393      350
AVERAGE:     63.80    78.60    70.00
</code></pre><h2 id="awk&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><a name="awk&#x5DE5;&#x4F5C;&#x539F;&#x7406;" class="anchor-navigation-ex-anchor" href="#awk&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>3.2. AWK&#x5DE5;&#x4F5C;&#x539F;&#x7406;</h2>
<p>AWK &#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x53EF;&#x5206;&#x4E3A;&#x4E09;&#x4E2A;&#x90E8;&#x5206;&#xFF1A;</p>
<ul>
<li>&#x8BFB;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x4E4B;&#x524D;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x6BB5;&#xFF08;&#x7531;BEGIN&#x5173;&#x952E;&#x5B57;&#x6807;&#x8BC6;&#xFF09;&#x3002;</li>
<li>&#x4E3B;&#x5FAA;&#x73AF;&#x6267;&#x884C;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x7684;&#x4EE3;&#x7801;&#x6BB5;&#x3002;</li>
<li>&#x8BFB;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x4E4B;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x6BB5;&#xFF08;&#x7531;END&#x5173;&#x952E;&#x5B57;&#x6807;&#x8BC6;&#xFF09;&#x3002;</li>
</ul>
<p>&#x547D;&#x4EE4;&#x7ED3;&#x6784;:</p>
<pre><code>awk &apos;BEGIN{ commands } pattern{ commands } END{ commands }&apos;
</code></pre><p>&#x4E0B;&#x9762;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x63CF;&#x8FF0;&#x51FA;&#x4E86; AWK &#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#xFF1A;</p>
<p><img src="imgs/centos/20170719154838100.png" alt="img"></p>
<ul>
<li>1&#x3001;&#x901A;&#x8FC7;&#x5173;&#x952E;&#x5B57; BEGIN &#x6267;&#x884C; BEGIN &#x5757;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5373; BEGIN &#x540E;&#x82B1;&#x62EC;&#x53F7; <strong>{}</strong> &#x7684;&#x5185;&#x5BB9;&#x3002;</li>
<li>2&#x3001;&#x5B8C;&#x6210; BEGIN &#x5757;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x5F00;&#x59CB;&#x6267;&#x884C;body&#x5757;&#x3002;</li>
<li>3&#x3001;&#x8BFB;&#x5165;&#x6709; <strong>\n</strong> &#x6362;&#x884C;&#x7B26;&#x5206;&#x5272;&#x7684;&#x8BB0;&#x5F55;&#x3002;</li>
<li>4&#x3001;&#x5C06;&#x8BB0;&#x5F55;&#x6309;&#x6307;&#x5B9A;&#x7684;&#x57DF;&#x5206;&#x9694;&#x7B26;&#x5212;&#x5206;&#x57DF;&#xFF0C;&#x586B;&#x5145;&#x57DF;&#xFF0C;<strong>$0</strong> &#x5219;&#x8868;&#x793A;&#x6240;&#x6709;&#x57DF;(&#x5373;&#x4E00;&#x884C;&#x5185;&#x5BB9;)&#xFF0C;<strong>$1</strong> &#x8868;&#x793A;&#x7B2C;&#x4E00;&#x4E2A;&#x57DF;&#xFF0C;<strong>$n</strong> &#x8868;&#x793A;&#x7B2C; n &#x4E2A;&#x57DF;&#x3002;</li>
<li>5&#x3001;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#x5404; BODY &#x5757;&#xFF0C;pattern &#x90E8;&#x5206;&#x5339;&#x914D;&#x8BE5;&#x884C;&#x5185;&#x5BB9;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x6267;&#x884C; awk-commands &#x7684;&#x5185;&#x5BB9;&#x3002;</li>
<li>6&#x3001;&#x5FAA;&#x73AF;&#x8BFB;&#x53D6;&#x5E76;&#x6267;&#x884C;&#x5404;&#x884C;&#x76F4;&#x5230;&#x6587;&#x4EF6;&#x7ED3;&#x675F;&#xFF0C;&#x5B8C;&#x6210;body&#x5757;&#x6267;&#x884C;&#x3002;</li>
<li>7&#x3001;&#x5F00;&#x59CB; END &#x5757;&#x6267;&#x884C;&#xFF0C;END &#x5757;&#x53EF;&#x4EE5;&#x8F93;&#x51FA;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x3002;</li>
</ul>
<h2 id="&#x8FD0;&#x7B97;&#x7B26;"><a name="&#x8FD0;&#x7B97;&#x7B26;" class="anchor-navigation-ex-anchor" href="#&#x8FD0;&#x7B97;&#x7B26;"><i class="fa fa-link" aria-hidden="true"></i></a>3.3. &#x8FD0;&#x7B97;&#x7B26;</h2>
<table>
<thead>
<tr>
<th style="text-align:left">&#x8FD0;&#x7B97;&#x7B26;</th>
<th style="text-align:left">&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">= += -= <em>= /= %= ^= *</em>=</td>
<td style="text-align:left">&#x8D4B;&#x503C;</td>
</tr>
<tr>
<td style="text-align:left">?:</td>
<td style="text-align:left">C&#x6761;&#x4EF6;&#x8868;&#x8FBE;&#x5F0F;</td>
</tr>
<tr>
<td style="text-align:left">\</td>
<td style="text-align:left">\</td>
<td></td>
<td>&#x903B;&#x8F91;&#x6216;</td>
</tr>
<tr>
<td style="text-align:left">&amp;&amp;</td>
<td style="text-align:left">&#x903B;&#x8F91;&#x4E0E;</td>
</tr>
<tr>
<td style="text-align:left">~ &#x548C; !~</td>
<td style="text-align:left">&#x5339;&#x914D;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x548C;&#x4E0D;&#x5339;&#x914D;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</td>
</tr>
<tr>
<td style="text-align:left">&lt; &lt;= &gt; &gt;= != ==</td>
<td style="text-align:left">&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;</td>
</tr>
<tr>
<td style="text-align:left">&#x7A7A;&#x683C;</td>
<td style="text-align:left">&#x8FDE;&#x63A5;</td>
</tr>
<tr>
<td style="text-align:left">+ -</td>
<td style="text-align:left">&#x52A0;&#xFF0C;&#x51CF;</td>
</tr>
<tr>
<td style="text-align:left">* / %</td>
<td style="text-align:left">&#x4E58;&#xFF0C;&#x9664;&#x4E0E;&#x6C42;&#x4F59;</td>
</tr>
<tr>
<td style="text-align:left">+ - !</td>
<td style="text-align:left">&#x4E00;&#x5143;&#x52A0;&#xFF0C;&#x51CF;&#x548C;&#x903B;&#x8F91;&#x975E;</td>
</tr>
<tr>
<td style="text-align:left">^ <em>*</em></td>
<td style="text-align:left">&#x6C42;&#x5E42;</td>
</tr>
<tr>
<td style="text-align:left">++ --</td>
<td style="text-align:left">&#x589E;&#x52A0;&#x6216;&#x51CF;&#x5C11;&#xFF0C;&#x4F5C;&#x4E3A;&#x524D;&#x7F00;&#x6216;&#x540E;&#x7F00;</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">&#x5B57;&#x6BB5;&#x5F15;&#x7528;</td>
</tr>
<tr>
<td style="text-align:left">in</td>
<td style="text-align:left">&#x6570;&#x7EC4;&#x6210;&#x5458;</td>
</tr>
</tbody>
</table>
<h3 id="&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x7684;&#x884C;"><a name="&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x7684;&#x884C;" class="anchor-navigation-ex-anchor" href="#&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x7684;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>3.3.1. &#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x7684;&#x884C;</h3>
<pre><code>$ awk &apos;$1&gt;2&apos; log.txt    #&#x547D;&#x4EE4;
3 Are you like awk
This&apos;s a test
10 There are orange,apple,mongo
</code></pre><h3 id="&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x7B49;&#x4E8E;2&#x7684;&#x884C;"><a name="&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x7B49;&#x4E8E;2&#x7684;&#x884C;" class="anchor-navigation-ex-anchor" href="#&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x7B49;&#x4E8E;2&#x7684;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>3.3.2. &#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x7B49;&#x4E8E;2&#x7684;&#x884C;</h3>
<pre><code>$ awk &apos;$1==2 {print $1,$3}&apos; log.txt    #&#x547D;&#x4EE4;
#&#x8F93;&#x51FA;
2 is
</code></pre><h3 id="&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x5E76;&#x4E14;&#x7B2C;&#x4E8C;&#x5217;&#x7B49;&#x4E8E;are&#x7684;&#x884C;"><a name="&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x5E76;&#x4E14;&#x7B2C;&#x4E8C;&#x5217;&#x7B49;&#x4E8E;are&#x7684;&#x884C;" class="anchor-navigation-ex-anchor" href="#&#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x5E76;&#x4E14;&#x7B2C;&#x4E8C;&#x5217;&#x7B49;&#x4E8E;are&#x7684;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>3.3.3. &#x8FC7;&#x6EE4;&#x7B2C;&#x4E00;&#x5217;&#x5927;&#x4E8E;2&#x5E76;&#x4E14;&#x7B2C;&#x4E8C;&#x5217;&#x7B49;&#x4E8E;&apos;Are&apos;&#x7684;&#x884C;</h3>
<pre><code>$ awk &apos;$1&gt;2 &amp;&amp; $2==&quot;Are&quot; {print $1,$2,$3}&apos; log.txt    #&#x547D;&#x4EE4;
#&#x8F93;&#x51FA;
3 Are you
</code></pre><h2 id="&#x5185;&#x5EFA;&#x53D8;&#x91CF;"><a name="&#x5185;&#x5EFA;&#x53D8;&#x91CF;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x5EFA;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>3.4. &#x5185;&#x5EFA;&#x53D8;&#x91CF;</h2>
<table>
<thead>
<tr>
<th style="text-align:left">&#x53D8;&#x91CF;</th>
<th style="text-align:left">&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$n</td>
<td style="text-align:left">&#x5F53;&#x524D;&#x8BB0;&#x5F55;&#x7684;&#x7B2C;n&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5B57;&#x6BB5;&#x95F4;&#x7531;FS&#x5206;&#x9694;</td>
</tr>
<tr>
<td style="text-align:left">$0</td>
<td style="text-align:left">&#x5B8C;&#x6574;&#x7684;&#x8F93;&#x5165;&#x8BB0;&#x5F55;</td>
</tr>
<tr>
<td style="text-align:left">ARGC</td>
<td style="text-align:left">&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x7684;&#x6570;&#x76EE;</td>
</tr>
<tr>
<td style="text-align:left">ARGIND</td>
<td style="text-align:left">&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;(&#x4ECE;0&#x5F00;&#x59CB;&#x7B97;)</td>
</tr>
<tr>
<td style="text-align:left">ARGV</td>
<td style="text-align:left">&#x5305;&#x542B;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x7684;&#x6570;&#x7EC4;</td>
</tr>
<tr>
<td style="text-align:left">CONVFMT</td>
<td style="text-align:left">&#x6570;&#x5B57;&#x8F6C;&#x6362;&#x683C;&#x5F0F;(&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;%.6g)ENVIRON&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x5173;&#x8054;&#x6570;&#x7EC4;</td>
</tr>
<tr>
<td style="text-align:left">ERRNO</td>
<td style="text-align:left">&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x9519;&#x8BEF;&#x7684;&#x63CF;&#x8FF0;</td>
</tr>
<tr>
<td style="text-align:left">FIELDWIDTHS</td>
<td style="text-align:left">&#x5B57;&#x6BB5;&#x5BBD;&#x5EA6;&#x5217;&#x8868;(&#x7528;&#x7A7A;&#x683C;&#x952E;&#x5206;&#x9694;)</td>
</tr>
<tr>
<td style="text-align:left">FILENAME</td>
<td style="text-align:left">&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x540D;</td>
</tr>
<tr>
<td style="text-align:left">FNR</td>
<td style="text-align:left">&#x5404;&#x6587;&#x4EF6;&#x5206;&#x522B;&#x8BA1;&#x6570;&#x7684;&#x884C;&#x53F7;</td>
</tr>
<tr>
<td style="text-align:left">FS</td>
<td style="text-align:left">&#x5B57;&#x6BB5;&#x5206;&#x9694;&#x7B26;(&#x9ED8;&#x8BA4;&#x662F;&#x4EFB;&#x4F55;&#x7A7A;&#x683C;)</td>
</tr>
<tr>
<td style="text-align:left">IGNORECASE</td>
<td style="text-align:left">&#x5982;&#x679C;&#x4E3A;&#x771F;&#xFF0C;&#x5219;&#x8FDB;&#x884C;&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;&#x7684;&#x5339;&#x914D;</td>
</tr>
<tr>
<td style="text-align:left">NF</td>
<td style="text-align:left">&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x5B57;&#x6BB5;&#x7684;&#x6570;&#x76EE;</td>
</tr>
<tr>
<td style="text-align:left">NR</td>
<td style="text-align:left">&#x5DF2;&#x7ECF;&#x8BFB;&#x51FA;&#x7684;&#x8BB0;&#x5F55;&#x6570;&#xFF0C;&#x5C31;&#x662F;&#x884C;&#x53F7;&#xFF0C;&#x4ECE;1&#x5F00;&#x59CB;</td>
</tr>
<tr>
<td style="text-align:left">OFMT</td>
<td style="text-align:left">&#x6570;&#x5B57;&#x7684;&#x8F93;&#x51FA;&#x683C;&#x5F0F;(&#x9ED8;&#x8BA4;&#x503C;&#x662F;%.6g)</td>
</tr>
<tr>
<td style="text-align:left">OFS</td>
<td style="text-align:left">&#x8F93;&#x51FA;&#x8BB0;&#x5F55;&#x5206;&#x9694;&#x7B26;&#xFF08;&#x8F93;&#x51FA;&#x6362;&#x884C;&#x7B26;&#xFF09;&#xFF0C;&#x8F93;&#x51FA;&#x65F6;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x7B26;&#x53F7;&#x4EE3;&#x66FF;&#x6362;&#x884C;&#x7B26;</td>
</tr>
<tr>
<td style="text-align:left">ORS</td>
<td style="text-align:left">&#x8F93;&#x51FA;&#x8BB0;&#x5F55;&#x5206;&#x9694;&#x7B26;(&#x9ED8;&#x8BA4;&#x503C;&#x662F;&#x4E00;&#x4E2A;&#x6362;&#x884C;&#x7B26;)</td>
</tr>
<tr>
<td style="text-align:left">RLENGTH</td>
<td style="text-align:left">&#x7531;match&#x51FD;&#x6570;&#x6240;&#x5339;&#x914D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;</td>
</tr>
<tr>
<td style="text-align:left">RS</td>
<td style="text-align:left">&#x8BB0;&#x5F55;&#x5206;&#x9694;&#x7B26;(&#x9ED8;&#x8BA4;&#x662F;&#x4E00;&#x4E2A;&#x6362;&#x884C;&#x7B26;)</td>
</tr>
<tr>
<td style="text-align:left">RSTART</td>
<td style="text-align:left">&#x7531;match&#x51FD;&#x6570;&#x6240;&#x5339;&#x914D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;</td>
</tr>
<tr>
<td style="text-align:left">SUBSEP</td>
<td style="text-align:left">&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x5206;&#x9694;&#x7B26;(&#x9ED8;&#x8BA4;&#x503C;&#x662F;/034)</td>
</tr>
</tbody>
</table>
<p>&#x683C;&#x5F0F;&#x5316;&#x53D8;&#x91CF;&#x8BF4;&#x660E;&#xFF1A;</p>
<p>%s        &#x8F93;&#x51FA;&#x5B57;&#x7B26;&#x4E32;
%i        &#x8F93;&#x51FA;&#x6574;&#x6570;
%f        &#x8F93;&#x51FA;&#x6D6E;&#x70B9;&#x6570;</p>
<p>%-5s &#x683C;&#x5F0F;&#x4E3A;&#x5DE6;&#x5BF9;&#x9F50;&#x4E14;&#x5BBD;&#x5EA6;&#x4E3A;5&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4EE3;&#x66FF;&#xFF08;-&#x8868;&#x793A;&#x5DE6;&#x5BF9;&#x9F50;&#xFF09;&#xFF0C;&#x4E0D;&#x4F7F;&#x7528;&#x5219;&#x662F;&#x53C8;&#x5BF9;&#x9F50;&#x3002; 
%-4.2f &#x683C;&#x5F0F;&#x4E3A;&#x5DE6;&#x5BF9;&#x9F50;&#x5BBD;&#x5EA6;&#x4E3A;4&#xFF0C;&#x4FDD;&#x7559;&#x4E24;&#x4F4D;&#x5C0F;&#x6570;&#x3002;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN{printf &quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;,&quot;FILENAME&quot;,&quot;ARGC&quot;,&quot;FNR&quot;,&quot;FS&quot;,&quot;NF&quot;,&quot;NR&quot;,&quot;OFS&quot;,&quot;ORS&quot;,&quot;RS&quot;;printf &quot;---------------------------------------------\n&quot;} {printf &quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;,FILENAME,ARGC,FNR,FS,NF,NR,OFS,ORS,RS}&apos;  log.txt
FILENAME ARGC  FNR   FS   NF   NR  OFS  ORS   RS
---------------------------------------------
log.txt    2    1         5    1         
log.txt    2    2         5    2         
log.txt    2    3         3    3          
log.txt    2    4         4    4         

python@ubuntu:~/test$ awk -F: &apos;BEGIN{printf &quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;,&quot;FILENAME&quot;,&quot;ARGC&quot;,&quot;FNR&quot;,&quot;FS&quot;,&quot;NF&quot;,&quot;NR&quot;,&quot;OFS&quot;,&quot;ORS&quot;,&quot;RS&quot;;printf &quot;---------------------------------------------\n&quot;} {printf &quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;,FILENAME,ARGC,FNR,FS,NF,NR,OFS,ORS,RS}&apos;  log.txt
FILENAME ARGC  FNR   FS   NF   NR  OFS  ORS   RS
---------------------------------------------
log.txt    2    1    :    1    1         
log.txt    2    2    :    1    2         
log.txt    2    3    :    1    3         
log.txt    2    4    :    1    4
</code></pre><h3 id="&#x8F93;&#x51FA;&#x987A;&#x5E8F;&#x53F7;-nr-&#x5339;&#x914D;&#x6587;&#x672C;&#x884C;&#x53F7;"><a name="&#x8F93;&#x51FA;&#x987A;&#x5E8F;&#x53F7;-nr-&#x5339;&#x914D;&#x6587;&#x672C;&#x884C;&#x53F7;" class="anchor-navigation-ex-anchor" href="#&#x8F93;&#x51FA;&#x987A;&#x5E8F;&#x53F7;-nr-&#x5339;&#x914D;&#x6587;&#x672C;&#x884C;&#x53F7;"><i class="fa fa-link" aria-hidden="true"></i></a>3.4.1. &#x8F93;&#x51FA;&#x987A;&#x5E8F;&#x53F7; NR, &#x5339;&#x914D;&#x6587;&#x672C;&#x884C;&#x53F7;</h3>
<pre><code>python@ubuntu:~/test$ awk &apos;{print NR,FNR,$1,$2,$3}&apos; log.txt
1 1 2 this is
2 2 3 Are you
3 3 This&apos;s a test
4 4 10 There are
</code></pre><h3 id="&#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x5206;&#x5272;&#x7B26;"><a name="&#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x5206;&#x5272;&#x7B26;" class="anchor-navigation-ex-anchor" href="#&#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x5206;&#x5272;&#x7B26;"><i class="fa fa-link" aria-hidden="true"></i></a>3.4.2. &#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x5206;&#x5272;&#x7B26;</h3>
<pre><code>python@ubuntu:~/test$ cat log.txt 
2 this is a test
3 Are you like awk
This&apos;s a test
10 There are orange,apple,mongo
python@ubuntu:~/test$ awk &apos;{print $1,$2,$5}&apos; OFS=&quot; $ &quot;  log.txt
2 $ this $ test
3 $ Are $ awk
This&apos;s $ a $ 
10 $ There $
</code></pre><h3 id="&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;"><a name="&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;" class="anchor-navigation-ex-anchor" href="#&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;"><i class="fa fa-link" aria-hidden="true"></i></a>3.4.3. &#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;</h3>
<pre><code>$ awk &apos;BEGIN{IGNORECASE=1} /this/&apos; log.txt
---------------------------------------------
2 this is a test
This&apos;s a test
</code></pre><h2 id="&#x6B63;&#x5219;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;"><a name="&#x6B63;&#x5219;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;" class="anchor-navigation-ex-anchor" href="#&#x6B63;&#x5219;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;"><i class="fa fa-link" aria-hidden="true"></i></a>3.5. &#x6B63;&#x5219;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;</h2>
<p><strong>~ &#x8868;&#x793A;&#x6A21;&#x5F0F;&#x5F00;&#x59CB;&#x3002;// &#x4E2D;&#x662F;&#x6A21;&#x5F0F;&#x3002;</strong></p>
<p>&#x8F93;&#x51FA;&#x7B2C;&#x4E8C;&#x5217;&#x5305;&#x542B; &quot;th&quot;&#xFF0C;&#x5E76;&#x6253;&#x5370;&#x7B2C;&#x4E8C;&#x5217;&#x4E0E;&#x7B2C;&#x56DB;&#x5217;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;$2 ~ /th/ {print $2,$4}&apos; log.txt
this a
</code></pre><p>&#x8F93;&#x51FA;&#x5305;&#x542B;&quot;re&quot;&#x7684;&#x884C;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;/re/&apos; log.txt
3 Are you like awk
10 There are orange,apple,mongo
</code></pre><p><strong>!&#x8868;&#x793A;&#x53D6;&#x53CD;</strong></p>
<p>&#x8F93;&#x51FA;&#x7B2C;&#x4E8C;&#x5217;&#x4E0D;&#x5305;&#x542B; &quot;th&quot;&#xFF0C;&#x5E76;&#x6253;&#x5370;&#x7B2C;&#x4E8C;&#x5217;&#x4E0E;&#x7B2C;&#x56DB;&#x5217;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;$2 !~ /th/ {print $2,$4}&apos; log.txt
Are like
a 
There orange,apple,mongo
</code></pre><p>&#x8F93;&#x51FA;&#x4E0D;&#x5305;&#x542B;&quot;re&quot;&#x7684;&#x884C;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;!/re/&apos; log.txt
2 this is a test
This&apos;s a test
</code></pre><h2 id="&#x4E00;&#x4E9B;&#x5B9E;&#x4F8B;"><a name="&#x4E00;&#x4E9B;&#x5B9E;&#x4F8B;" class="anchor-navigation-ex-anchor" href="#&#x4E00;&#x4E9B;&#x5B9E;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>3.6. &#x4E00;&#x4E9B;&#x5B9E;&#x4F8B;</h2>
<h3 id="&#x8BA1;&#x7B97;&#x6587;&#x4EF6;&#x5927;&#x5C0F;"><a name="&#x8BA1;&#x7B97;&#x6587;&#x4EF6;&#x5927;&#x5C0F;" class="anchor-navigation-ex-anchor" href="#&#x8BA1;&#x7B97;&#x6587;&#x4EF6;&#x5927;&#x5C0F;"><i class="fa fa-link" aria-hidden="true"></i></a>3.6.1. &#x8BA1;&#x7B97;&#x6587;&#x4EF6;&#x5927;&#x5C0F;</h3>
<pre><code>$ ls -l *.txt | awk &apos;{sum+=$6} END {print sum}&apos;
--------------------------------------------------
666581
</code></pre><h3 id="&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x51FA;&#x957F;&#x5EA6;&#x5927;&#x4E8E;80&#x7684;&#x884C;"><a name="&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x51FA;&#x957F;&#x5EA6;&#x5927;&#x4E8E;80&#x7684;&#x884C;" class="anchor-navigation-ex-anchor" href="#&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x51FA;&#x957F;&#x5EA6;&#x5927;&#x4E8E;80&#x7684;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>3.6.2. &#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x51FA;&#x957F;&#x5EA6;&#x5927;&#x4E8E;80&#x7684;&#x884C;</h3>
<pre><code>awk &apos;length&gt;80&apos; log.txt
</code></pre><h3 id="&#x6253;&#x5370;&#x4E5D;&#x4E5D;&#x4E58;&#x6CD5;&#x8868;"><a name="&#x6253;&#x5370;&#x4E5D;&#x4E5D;&#x4E58;&#x6CD5;&#x8868;" class="anchor-navigation-ex-anchor" href="#&#x6253;&#x5370;&#x4E5D;&#x4E5D;&#x4E58;&#x6CD5;&#x8868;"><i class="fa fa-link" aria-hidden="true"></i></a>3.6.3. &#x6253;&#x5370;&#x4E5D;&#x4E5D;&#x4E58;&#x6CD5;&#x8868;</h3>
<pre><code>seq 9 | sed &apos;H;g&apos; | awk -v RS=&apos;&apos; &apos;{for(i=1;i&lt;=NF;i++)printf(&quot;%dx%d=%d%s&quot;, i, NR, i*NR, i==NR?&quot;\n&quot;:&quot;\t&quot;)}&apos;
</code></pre><h3 id="&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x5206;&#x6790;"><a name="&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x5206;&#x6790;" class="anchor-navigation-ex-anchor" href="#&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x5206;&#x6790;"><i class="fa fa-link" aria-hidden="true"></i></a>3.6.4. &#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x5206;&#x6790;</h3>
<p>&#x65E5;&#x5FD7;&#x683C;&#x5F0F;</p>
<pre><code>python@ubuntu:~/test$ head access.log -n1
42.236.10.75 &quot;changtou.xiaoxiaoming.xyz&quot; [14/Oct/2019:12:47:18 +0800] &quot;GET /logo/8@3x.png HTTP/1.1&quot; 200 26053 &quot;https://changtou.xiaoxiaoming.xyz/&quot; &quot;Mozilla/5.0 (Linux; U; Android 8.1.0; zh-CN; EML-AL00 Build/HUAWEIEML-AL00) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.108 baidu.sogo.uc.UCBrowser/11.9.4.974 UWS/2.13.1.48 Mobile Safari/537.36 AliApp(DingTalk/4.5.11) com.alibaba.android.rimet/10487439 Channel/227200 language/zh-CN&quot; &quot;42.236.10.75&quot; rt=&quot;0.000&quot; uct=&quot;-&quot; uht=&quot;-&quot; urt=&quot;-&quot;
</code></pre><p>&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code>1.&#x6570;&#x636E;&#x6E05;&#x6D17;
awk &apos;($6 ~ /.html/) &amp;&amp; ($8 ~ /200/)  {print $0}&apos; access.log &gt; clean.log

2.&#x7EDF;&#x8BA1;PV
python@ubuntu:~/test$ awk &apos;{print $0}&apos;  clean.log | wc -l
700
python@ubuntu:~/test$ cut -d &apos; &apos; -f 1 clean.log|wc -l    
700

3:UV
python@ubuntu:~/test$ awk &apos;{print $1}&apos;  clean.log |sort|uniq| wc -l
155
python@ubuntu:~/test$ cut -d &apos; &apos; -f 1 clean.log|sort|uniq| wc -l
155

4:&#x83B7;&#x53D6;&#x6BCF;&#x5929;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x6700;&#x591A;&#x7684;&#x524D;10&#x540D;&#x7528;&#x6237;
awk &apos;{print $1}&apos; clean.log|sort|uniq -c|sort -k 1nr|head
&#x6216;
cut -d &apos; &apos; -f 1 clean.log|sort|uniq -c|sort -k 1nr|head
</code></pre><h1 id="awk&#x7F16;&#x7A0B;"><a name="awk&#x7F16;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#awk&#x7F16;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>4. awk&#x7F16;&#x7A0B;</h1>
<h2 id="&#x6761;&#x4EF6;&#x8BED;&#x53E5;ifelse"><a name="&#x6761;&#x4EF6;&#x8BED;&#x53E5;ifelse" class="anchor-navigation-ex-anchor" href="#&#x6761;&#x4EF6;&#x8BED;&#x53E5;ifelse"><i class="fa fa-link" aria-hidden="true"></i></a>4.1. &#x6761;&#x4EF6;&#x8BED;&#x53E5;IF&amp;ELSE</h2>
<p>IF &#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x8BED;&#x6CD5;&#x683C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>if (condition)
    action
</code></pre><p>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x82B1;&#x62EC;&#x53F7;&#x6765;&#x6267;&#x884C;&#x4E00;&#x7EC4;&#x64CD;&#x4F5C;&#xFF1A;</p>
<pre><code>if (condition)
{
    action-1
    action-1
    .
    .
    action-n
}
</code></pre><p>&#x5224;&#x65AD;&#x6570;&#x5B57;&#x662F;&#x5947;&#x6570;&#x8FD8;&#x662F;&#x5076;&#x6570;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN {num = 10; if (num % 2 == 0) printf &quot;%d &#x662F;&#x5076;&#x6570;\n&quot;, num }&apos;
10 &#x662F;&#x5076;&#x6570;
</code></pre><p>IF - ELSE &#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x8BED;&#x6CD5;&#x683C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>if (condition)
    action-1
else
    action-2
</code></pre><p>&#x5728;&#x6761;&#x4EF6;&#x8BED;&#x53E5; condition &#x4E3A; true &#x65F6;&#x53EA;&#x9700; action-1&#xFF0C;&#x5426;&#x5219;&#x6267;&#x884C; action-2&#x3002;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN {
&gt;     num = 11; 
&gt;     if (num % 2 == 0) printf &quot;%d &#x662F;&#x5076;&#x6570;\n&quot;, num; 
&gt;     else printf &quot;%d &#x662F;&#x5947;&#x6570;\n&quot;, num 
&gt; }&apos;
11 &#x662F;&#x5947;&#x6570;
python@ubuntu:~/test$ awk &apos;BEGIN {num = 11; if (num % 2 == 0) printf &quot;%d &#x662F;&#x5076;&#x6570;\n&quot;, num; else printf &quot;%d &#x662F;&#x5947;&#x6570;\n&quot;, num }&apos;
11 &#x662F;&#x5947;&#x6570;
</code></pre><p>&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x591A;&#x4E2A; IF - ELSE &#x683C;&#x5F0F;&#x7684;&#x5224;&#x65AD;&#x8BED;&#x53E5;&#x6765;&#x5B9E;&#x73B0;&#x591A;&#x4E2A;&#x6761;&#x4EF6;&#x7684;&#x5224;&#x65AD;&#xFF1A;</p>
<pre><code>$ awk &apos;BEGIN {
a=30;
if (a==10)
  print &quot;a = 10&quot;;
else if (a == 20)
  print &quot;a = 20&quot;;
else if (a == 30)
  print &quot;a = 30&quot;;
}&apos;
</code></pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN {
&gt; a=30;
&gt; if (a==10)
&gt;   print &quot;a = 10&quot;;
&gt; else if (a == 20)
&gt;   print &quot;a = 20&quot;;
&gt; else if (a == 30)
&gt;   print &quot;a = 30&quot;;
&gt; }&apos;
a = 30
</code></pre><h2 id="&#x5FAA;&#x73AF;&#x8BED;&#x53E5;forwhile"><a name="&#x5FAA;&#x73AF;&#x8BED;&#x53E5;forwhile" class="anchor-navigation-ex-anchor" href="#&#x5FAA;&#x73AF;&#x8BED;&#x53E5;forwhile"><i class="fa fa-link" aria-hidden="true"></i></a>4.2. &#x5FAA;&#x73AF;&#x8BED;&#x53E5;For&amp;While</h2>
<p>For &#x5FAA;&#x73AF;&#x7684;&#x8BED;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>for (initialisation; condition; increment/decrement)
    action
</code></pre><p>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4F7F;&#x7528; For &#x5FAA;&#x73AF;&#x8F93;&#x51FA;&#x6570;&#x5B57; 1 &#x81F3; 5&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN { for (i = 1; i &lt;= 5; ++i) print i }&apos;
1
2
3
4
5
</code></pre><p>While &#x5FAA;&#x73AF;&#x7684;&#x8BED;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>while (condition)
    action
</code></pre><p>&#x4E0B;&#x9762;&#x662F;&#x4F7F;&#x7528; While &#x5FAA;&#x73AF;&#x8F93;&#x51FA;&#x6570;&#x5B57; 1 &#x5230; 5 &#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN {i = 1; while (i &lt; 6) { print i; ++i } }&apos;
1
2
3
4
5
</code></pre><p>&#x5728;&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x5F53;&#x8BA1;&#x7B97;&#x7684;&#x548C;&#x5927;&#x4E8E; 50 &#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528; break &#x7ED3;&#x675F;&#x5FAA;&#x73AF;&#xFF1A;</p>
<pre><code>$ awk &apos;BEGIN {
   sum = 0; for (i = 0; i &lt; 20; ++i) { 
      sum += i; if (sum &gt; 50) break; else print &quot;Sum =&quot;, sum 
   } 
}&apos;
</code></pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN {
&gt;    sum = 0; for (i = 0; i &lt; 20; ++i) { 
&gt;       sum += i; if (sum &gt; 50) break; else print &quot;Sum =&quot;, sum 
&gt;    } 
&gt; }&apos;
Sum = 0
Sum = 1
Sum = 3
Sum = 6
Sum = 10
Sum = 15
Sum = 21
Sum = 28
Sum = 36
Sum = 45
</code></pre><p>Continue &#x8BED;&#x53E5;&#x7528;&#x4E8E;&#x5728;&#x5FAA;&#x73AF;&#x4F53;&#x5185;&#x90E8;&#x7ED3;&#x675F;&#x672C;&#x6B21;&#x5FAA;&#x73AF;&#xFF0C;&#x4ECE;&#x800C;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x4E0B;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#x8FED;&#x4EE3;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x8F93;&#x51FA; 1 &#x5230; 20 &#x4E4B;&#x95F4;&#x7684;&#x5076;&#x6570;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN {for (i = 1; i &lt;= 20; ++i) {if (i % 2 == 0) print i ; else continue} }&apos;
2
4
6
8
10
12
14
16
18
20
</code></pre><p>Exit &#x7528;&#x4E8E;&#x7ED3;&#x675F;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x3002;</p>
<p>&#x8BE5;&#x51FD;&#x6570;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x8868;&#x793A; AWK &#x8FDB;&#x7A0B;&#x7ED3;&#x675F;&#x72B6;&#x6001;&#x3002; &#x5982;&#x679C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x8BE5;&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x9ED8;&#x8BA4;&#x72B6;&#x6001;&#x4E3A; 0&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x4F8B;&#x5B50;&#x4E2D;&#x5F53;&#x548C;&#x5927;&#x4E8E; 50 &#x65F6;&#x7ED3;&#x675F; AWK &#x7A0B;&#x5E8F;&#x3002;</p>
<pre><code>$ awk &apos;BEGIN {
   sum = 0; for (i = 0; i &lt; 20; ++i) {
      sum += i; if (sum &gt; 50) exit(10); else print &quot;Sum =&quot;, sum 
   } 
}&apos;
</code></pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</p>
<pre><code>python@ubuntu:~/test$ awk &apos;BEGIN {
&gt;    sum = 0; for (i = 0; i &lt; 20; ++i) {
&gt;       sum += i; if (sum &gt; 50) exit(10); else print &quot;Sum =&quot;, sum 
&gt;    } 
&gt; }&apos;
Sum = 0
Sum = 1
Sum = 3
Sum = 6
Sum = 10
Sum = 15
Sum = 21
Sum = 28
Sum = 36
Sum = 45
python@ubuntu:~/test$ echo $?
10
</code></pre><h2 id="awk&#x6570;&#x7EC4;"><a name="awk&#x6570;&#x7EC4;" class="anchor-navigation-ex-anchor" href="#awk&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>4.3. awk&#x6570;&#x7EC4;</h2>
<p>AWK&#x7684;&#x6570;&#x7EC4;&#x5E95;&#x5C42;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x662F;&#x6570;&#x5B57;&#x6216;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x6570;&#x7EC4;&#x4F7F;&#x7528;&#x7684;&#x8BED;&#x6CD5;&#x683C;&#x5F0F;&#xFF1A;</p>
<pre><code>array_name[index]=value
</code></pre><p>&#x521B;&#x5EFA;&#x6570;&#x7EC4;&#x5E76;&#x8BBF;&#x95EE;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#xFF1A;</p>
<pre><code>$ awk &apos;BEGIN {
sites[&quot;taobao&quot;]=&quot;www.taobao.com&quot;;
sites[&quot;google&quot;]=&quot;www.google.com&quot;
print sites[&quot;taobao&quot;] &quot;\n&quot; sites[&quot;google&quot;]
}&apos;
</code></pre><p>&#x5220;&#x9664;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x8BED;&#x6CD5;&#x683C;&#x5F0F;&#xFF1A;</p>
<pre><code>delete array_name[index]
</code></pre><p>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x7684; google &#x5143;&#x7D20;&#x88AB;&#x5220;&#x9664;&#xFF08;&#x5220;&#x9664;&#x547D;&#x4EE4;&#x6CA1;&#x6709;&#x8F93;&#x51FA;&#xFF09;&#xFF1A;</p>
<pre><code>$ awk &apos;BEGIN {
sites[&quot;taobao&quot;]=&quot;www.taobao.com&quot;;
sites[&quot;google&quot;]=&quot;www.google.com&quot;
delete sites[&quot;google&quot;];
print sites[&quot;google&quot;]
}&apos;
</code></pre><p>AWK &#x672C;&#x8EAB;&#x4E0D;&#x652F;&#x6301;&#x591A;&#x7EF4;&#x6570;&#x7EC4;&#xFF0C;&#x4E0D;&#x8FC7;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x5730;&#x4F7F;&#x7528;&#x4E00;&#x7EF4;&#x6570;&#x7EC4;&#x6A21;&#x62DF;&#x5B9E;&#x73B0;&#x591A;&#x7EF4;&#x6570;&#x7EC4;&#x3002;</p>
<p>&#x5982;&#x4E0B;&#x793A;&#x4F8B;&#x4E3A;&#x4E00;&#x4E2A; 3x3 &#x7684;&#x4E09;&#x7EF4;&#x6570;&#x7EC4;&#xFF1A;</p>
<pre><code>100 200 300
400 500 600
700 800 900
</code></pre><p>&#x4EE5;&#x4E0A;&#x5B9E;&#x4F8B;&#x4E2D;&#xFF0C;<code>array[0][0]</code> &#x5B58;&#x50A8; 100&#xFF0C;<code>array[0][1]</code> &#x5B58;&#x50A8; 200 &#xFF0C;&#x4F9D;&#x6B21;&#x7C7B;&#x63A8;&#x3002;&#x4E3A;&#x4E86;&#x5728; <code>array[0][0]</code> &#x5904;&#x5B58;&#x50A8; 100, &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B57;&#x7B26;&#x4E32;0,0 &#x4F5C;&#x4E3A;&#x7D22;&#x5F15;&#xFF1A; array[&quot;0,0&quot;] = 100&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x6A21;&#x62DF;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code>$ awk &apos;BEGIN {
array[&quot;0,0&quot;] = 100;
array[&quot;0,1&quot;] = 200;
array[&quot;0,2&quot;] = 300;
array[&quot;1,0&quot;] = 400;
array[&quot;1,1&quot;] = 500;
array[&quot;1,2&quot;] = 600;
# &#x8F93;&#x51FA;&#x6570;&#x7EC4;&#x5143;&#x7D20;
print &quot;array[0,0] = &quot; array[&quot;0,0&quot;];
print &quot;array[0,1] = &quot; array[&quot;0,1&quot;];
print &quot;array[0,2] = &quot; array[&quot;0,2&quot;];
print &quot;array[1,0] = &quot; array[&quot;1,0&quot;];
print &quot;array[1,1] = &quot; array[&quot;1,1&quot;];
print &quot;array[1,2] = &quot; array[&quot;1,2&quot;];
}&apos;
</code></pre><p>&#x6267;&#x884C;&#x4E0A;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x5982;&#x4E0B;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre><code>array[0,0] = 100
array[0,1] = 200
array[0,2] = 300
array[1,0] = 400
array[1,1] = 500
array[1,2] = 600
</code></pre><p>&#x5728;&#x6570;&#x7EC4;&#x4E0A;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x5F88;&#x591A;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;&#x4F7F;&#x7528; asort &#x5B8C;&#x6210;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x7684;&#x6392;&#x5E8F;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528; asorti &#x5B9E;&#x73B0;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x7684;&#x6392;&#x5E8F;&#x7B49;&#x7B49;&#x3002;</p>
<h2 id="awk-&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;"><a name="awk-&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#awk-&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>4.4. AWK &#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;</h2>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#x7684;&#x8BED;&#x6CD5;&#x683C;&#x5F0F;&#x4E3A;&#xFF1A;</p>
<pre><code>function function_name(argument1, argument2, ...)
{
    function body
}
</code></pre><p>&#x4EE5;&#x4E0B;&#x5B9E;&#x4F8B;&#x5B9E;&#x73B0;&#x4E86;&#x4E24;&#x4E2A;&#x7B80;&#x5355;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x8FD4;&#x56DE;&#x4E24;&#x4E2A;&#x6570;&#x503C;&#x4E2D;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x548C;&#x6700;&#x5927;&#x503C;&#x3002;</p>
<p>&#x6587;&#x4EF6; functions.awk &#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code># &#x8FD4;&#x56DE;&#x6700;&#x5C0F;&#x503C;
function find_min(num1, num2)
{
  if (num1 &lt; num2)
    return num1
  return num2
}

# &#x8FD4;&#x56DE;&#x6700;&#x5927;&#x503C;
function find_max(num1, num2)
{
  if (num1 &gt; num2)
    return num1
  return num2
}

# &#x4E3B;&#x51FD;&#x6570;
function main(num1, num2)
{
  # &#x67E5;&#x627E;&#x6700;&#x5C0F;&#x503C;
  result = find_min(10, 20)
  print &quot;Minimum =&quot;, result

  # &#x67E5;&#x627E;&#x6700;&#x5927;&#x503C;
  result = find_max(10, 20)
  print &quot;Maximum =&quot;, result
}

# &#x811A;&#x672C;&#x4ECE;&#x8FD9;&#x91CC;&#x5F00;&#x59CB;&#x6267;&#x884C;
BEGIN {
  main(10, 20)
}
</code></pre><p>&#x6267;&#x884C; functions.awk &#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x5982;&#x4E0B;&#x7684;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre><code>$ awk -f functions.awk 
Minimum = 10
Maximum = 20
</code></pre><h2 id="awk-&#x5185;&#x7F6E;&#x51FD;&#x6570;"><a name="awk-&#x5185;&#x7F6E;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#awk-&#x5185;&#x7F6E;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>4.5. AWK &#x5185;&#x7F6E;&#x51FD;&#x6570;</h2>
<p>AWK &#x5185;&#x7F6E;&#x51FD;&#x6570;&#x4E3B;&#x8981;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#xFF1A;</p>
<ul>
<li>&#x7B97;&#x6570;&#x51FD;&#x6570;</li>
<li>&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;</li>
<li>&#x65F6;&#x95F4;&#x51FD;&#x6570;</li>
<li>&#x4F4D;&#x64CD;&#x4F5C;&#x51FD;&#x6570;</li>
<li>&#x5176;&#x5B83;&#x51FD;&#x6570;</li>
</ul>
<h3 id="&#x7B97;&#x6570;&#x51FD;&#x6570;"><a name="&#x7B97;&#x6570;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x7B97;&#x6570;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>4.5.1. &#x7B97;&#x6570;&#x51FD;&#x6570;</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>&#x51FD;&#x6570;&#x540D;</strong></th>
<th style="text-align:left"><strong>&#x8BF4;&#x660E;</strong></th>
<th style="text-align:left"><strong>&#x5B9E;&#x4F8B;</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">atan2( y, x )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; y/x &#x7684;&#x53CD;&#x6B63;&#x5207;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  PI = 3.14159265  x = -10  y = 10  result = atan2 (y,x) * 180 / PI;   printf &quot;The arc tangent for (x=%f, y=%f) is %f degrees\n&quot;, x, y, result }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>The arc tangent for (x=-10.000000, y=10.000000) is 135.000000 degrees</code></td>
</tr>
<tr>
<td style="text-align:left">cos( x )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; x &#x7684;&#x4F59;&#x5F26;&#xFF1B;x &#x662F;&#x5F27;&#x5EA6;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  PI = 3.14159265  param = 60  result = cos(param * PI / 180.0);   printf &quot;The cosine of %f degrees is %f.\n&quot;, param, result }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>The cosine of 60.000000 degrees is 0.500000.</code></td>
</tr>
<tr>
<td style="text-align:left">sin( x )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; x &#x7684;&#x6B63;&#x5F26;&#xFF1B;x &#x662F;&#x5F27;&#x5EA6;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  PI = 3.14159265  param = 30.0  result = sin(param * PI /180)   printf &quot;The sine of %f degrees is %f.\n&quot;, param, result }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>The sine of 30.000000 degrees is 0.500000.</code></td>
</tr>
<tr>
<td style="text-align:left">exp( x )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; x &#x5E42;&#x51FD;&#x6570;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  param = 5  result = exp(param);   printf &quot;The exponential value of %f is %f.\n&quot;, param, result }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>The exponential value of 5.000000 is 148.413159.</code></td>
</tr>
<tr>
<td style="text-align:left">log( x )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; x &#x7684;&#x81EA;&#x7136;&#x5BF9;&#x6570;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  param = 5.5  result = log (param)   printf &quot;log(%f) = %f\n&quot;, param, result }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>log(5.500000) = 1.704748</code></td>
</tr>
<tr>
<td style="text-align:left">sqrt( x )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; x &#x5E73;&#x65B9;&#x6839;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  param = 1024.0  result = sqrt(param)   printf &quot;sqrt(%f) = %f\n&quot;, param, result }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>sqrt(1024.000000) = 32.000000</code></td>
</tr>
<tr>
<td style="text-align:left">int( x )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; x &#x7684;&#x622A;&#x65AD;&#x81F3;&#x6574;&#x6570;&#x7684;&#x503C;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  param = 5.12345  result = int(param)   print &quot;Truncated value =&quot;, result }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Truncated value = 5</code></td>
</tr>
<tr>
<td style="text-align:left">rand( )</td>
<td style="text-align:left">&#x8FD4;&#x56DE;&#x4EFB;&#x610F;&#x6570;&#x5B57; n&#xFF0C;&#x5176;&#x4E2D; 0 &lt;= n &lt; 1&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  print &quot;Random num1 =&quot; , rand()  print &quot;Random num2 =&quot; , rand()  print &quot;Random num3 =&quot; , rand() }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Random num1 = 0.237788 Random num2 = 0.291066 Random num3 = 0.845814</code></td>
</tr>
<tr>
<td style="text-align:left">srand( [Expr] )</td>
<td style="text-align:left">&#x5C06; rand &#x51FD;&#x6570;&#x7684;&#x79CD;&#x5B50;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A; Expr &#x53C2;&#x6570;&#x7684;&#x503C;&#xFF0C;&#x6216;&#x5982;&#x679C;&#x7701;&#x7565; Expr &#x53C2;&#x6570;&#x5219;&#x4F7F;&#x7528;&#x67D0;&#x5929;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x8FD4;&#x56DE;&#x5148;&#x524D;&#x7684;&#x79CD;&#x5B50;&#x503C;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {  param = 10   printf &quot;srand() = %d\n&quot;, srand()  printf &quot;srand(%d) = %d\n&quot;, param, srand(param) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>srand() = 1 srand(10) = 1417959587</code></td>
</tr>
</tbody>
</table>
<h3 id="&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;"><a name="&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>4.5.2. &#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>&#x51FD;&#x6570;</strong></th>
<th style="text-align:left"><strong>&#x8BF4;&#x660E;</strong></th>
<th style="text-align:left"><strong>&#x5B9E;&#x4F8B;</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">gsub( Ere, Repl, [ In ] )</td>
<td style="text-align:left">gsub &#x662F;&#x5168;&#x5C40;&#x66FF;&#x6362;( global substitution )&#x7684;&#x7F29;&#x5199;&#x3002;&#x9664;&#x4E86;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6240;&#x6709;&#x5177;&#x4F53;&#x503C;&#x88AB;&#x66FF;&#x4EE3;&#x8FD9;&#x70B9;&#xFF0C;&#x5B83;&#x548C; sub &#x51FD;&#x6570;&#x5B8C;&#x5168;&#x4E00;&#x6837;&#x5730;&#x6267;&#x884C;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;Hello, World&quot;     print &quot;String before replacement = &quot; str     gsub(&quot;World&quot;, &quot;Jerry&quot;, str)     print &quot;String after replacement = &quot; str }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>String before replacement = Hello, World String after replacement = Hello, Jerry</code></td>
</tr>
<tr>
<td style="text-align:left">sub(regex,sub,string)</td>
<td style="text-align:left">sub &#x51FD;&#x6570;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x5B50;&#x4E32;&#x66FF;&#x6362;&#x3002;&#x5B83;&#x5C06;&#x7B2C;&#x4E00;&#x6B21;&#x51FA;&#x73B0;&#x7684;&#x5B50;&#x4E32;&#x7528; regex &#x66FF;&#x6362;&#x3002;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; $0&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;Hello, World&quot;     print &quot;String before replacement = &quot; str     sub(&quot;World&quot;, &quot;Jerry&quot;, str)     print &quot;String after replacement = &quot; str }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>String before replacement = Hello, World String after replacement = Hello, Jerry</code></td>
</tr>
<tr>
<td style="text-align:left">substr(str, start, l)</td>
<td style="text-align:left">substr &#x51FD;&#x6570;&#x8FD4;&#x56DE; str &#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x4ECE;&#x7B2C; start &#x4E2A;&#x5B57;&#x7B26;&#x5F00;&#x59CB;&#x957F;&#x5EA6;&#x4E3A; l &#x7684;&#x5B50;&#x4E32;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A; l &#x7684;&#x503C;&#xFF0C;&#x8FD4;&#x56DE; str &#x4ECE;&#x7B2C; start &#x4E2A;&#x5B57;&#x7B26;&#x5F00;&#x59CB;&#x7684;&#x540E;&#x7F00;&#x5B50;&#x4E32;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;Hello, World !!!&quot;    subs = substr(str, 1, 5)     print &quot;Substring = &quot; subs }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Substring = Hello</code></td>
</tr>
<tr>
<td style="text-align:left">index( String1, String2 )</td>
<td style="text-align:left">&#x5728;&#x7531; String1 &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x5176;&#x4E2D;&#x6709;&#x51FA;&#x73B0; String2 &#x6307;&#x5B9A;&#x7684;&#x53C2;&#x6570;&#xFF09;&#x4E2D;&#xFF0C;&#x8FD4;&#x56DE;&#x4F4D;&#x7F6E;&#xFF0C;&#x4ECE; 1 &#x5F00;&#x59CB;&#x7F16;&#x53F7;&#x3002;&#x5982;&#x679C; String2 &#x53C2;&#x6570;&#x4E0D;&#x5728; String1 &#x53C2;&#x6570;&#x4E2D;&#x51FA;&#x73B0;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; 0&#xFF08;&#x96F6;&#xFF09;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;One Two Three&quot;    subs = &quot;Two&quot;     ret = index(str, subs)     printf &quot;Substring \&quot;%s\&quot; found at %d location.\n&quot;, subs, ret }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Substring &quot;Two&quot; found at 5 location.</code></td>
</tr>
<tr>
<td style="text-align:left">length [(String)]</td>
<td style="text-align:left">&#x8FD4;&#x56DE; String &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#xFF08;&#x5B57;&#x7B26;&#x5F62;&#x5F0F;&#xFF09;&#x3002;&#x5982;&#x679C;&#x672A;&#x7ED9;&#x51FA; String &#x53C2;&#x6570;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x6574;&#x4E2A;&#x8BB0;&#x5F55;&#x7684;&#x957F;&#x5EA6;&#xFF08;$0 &#x8BB0;&#x5F55;&#x53D8;&#x91CF;&#xFF09;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;Hello, World !!!&quot;     print &quot;Length = &quot;, length(str) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Substring &quot;Two&quot; found at 5 location.</code></td>
</tr>
<tr>
<td style="text-align:left">blength [(String)]</td>
<td style="text-align:left">&#x8FD4;&#x56DE; String &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#xFF08;&#x4EE5;&#x5B57;&#x8282;&#x4E3A;&#x5355;&#x4F4D;&#xFF09;&#x3002;&#x5982;&#x679C;&#x672A;&#x7ED9;&#x51FA; String &#x53C2;&#x6570;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x6574;&#x4E2A;&#x8BB0;&#x5F55;&#x7684;&#x957F;&#x5EA6;&#xFF08;$0 &#x8BB0;&#x5F55;&#x53D8;&#x91CF;&#xFF09;&#x3002;</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">substr( String, M, [ N ] )</td>
<td style="text-align:left">&#x8FD4;&#x56DE;&#x5177;&#x6709; N &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x6570;&#x91CF;&#x5B50;&#x4E32;&#x3002;&#x5B50;&#x4E32;&#x4ECE; String &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x53D6;&#x5F97;&#xFF0C;&#x5176;&#x5B57;&#x7B26;&#x4EE5; M &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x3002;M &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x4E3A;&#x5C06; String &#x53C2;&#x6570;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4F5C;&#x4E3A;&#x7F16;&#x53F7; 1&#x3002;&#x5982;&#x679C;&#x672A;&#x6307;&#x5B9A; N &#x53C2;&#x6570;&#xFF0C;&#x5219;&#x5B50;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#x5C06;&#x662F; M &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x5230; String &#x53C2;&#x6570;&#x7684;&#x672B;&#x5C3E; &#x7684;&#x957F;&#x5EA6;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;Hello, World !!!&quot;    subs = substr(str, 1, 5)     print &quot;Substring = &quot; subs }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Substring = Hello</code></td>
</tr>
<tr>
<td style="text-align:left">match( String, Ere )</td>
<td style="text-align:left">&#x5728; String &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF08;Ere &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x6269;&#x5C55;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x51FA;&#x73B0;&#x5728;&#x5176;&#x4E2D;&#xFF09;&#x4E2D;&#x8FD4;&#x56DE;&#x4F4D;&#x7F6E;&#xFF08;&#x5B57;&#x7B26;&#x5F62;&#x5F0F;&#xFF09;&#xFF0C;&#x4ECE; 1 &#x5F00;&#x59CB;&#x7F16;&#x53F7;&#xFF0C;&#x6216;&#x5982;&#x679C; Ere &#x53C2;&#x6570;&#x4E0D;&#x51FA;&#x73B0;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; 0&#xFF08;&#x96F6;&#xFF09;&#x3002;RSTART &#x7279;&#x6B8A;&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;&#x4E3A;&#x8FD4;&#x56DE;&#x503C;&#x3002;RLENGTH &#x7279;&#x6B8A;&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;&#x4E3A;&#x5339;&#x914D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x6216;&#x5982;&#x679C;&#x672A;&#x627E;&#x5230;&#x4EFB;&#x4F55;&#x5339;&#x914D;&#xFF0C;&#x5219;&#x8BBE;&#x7F6E;&#x4E3A; -1&#xFF08;&#x8D1F;&#x4E00;&#xFF09;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;One Two Three&quot;    subs = &quot;Two&quot;     ret = match(str, subs)     printf &quot;Substring \&quot;%s\&quot; found at %d location.\n&quot;, subs, ret }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Substring &quot;Two&quot; found at 5 location.</code></td>
</tr>
<tr>
<td style="text-align:left">split( String, A, [Ere] )</td>
<td style="text-align:left">&#x5C06; String &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x53C2;&#x6570;&#x5206;&#x5272;&#x4E3A;&#x6570;&#x7EC4;&#x5143;&#x7D20; A[1], A[2], . . ., A[n]&#xFF0C;&#x5E76;&#x8FD4;&#x56DE; n &#x53D8;&#x91CF;&#x7684;&#x503C;&#x3002;&#x6B64;&#x5206;&#x9694;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; Ere &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x6269;&#x5C55;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x8FDB;&#x884C;&#xFF0C;&#x6216;&#x7528;&#x5F53;&#x524D;&#x5B57;&#x6BB5;&#x5206;&#x9694;&#x7B26;&#xFF08;FS &#x7279;&#x6B8A;&#x53D8;&#x91CF;&#xFF09;&#x6765;&#x8FDB;&#x884C;&#xFF08;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7ED9;&#x51FA; Ere &#x53C2;&#x6570;&#xFF09;&#x3002;&#x9664;&#x975E;&#x4E0A;&#x4E0B;&#x6587;&#x6307;&#x660E;&#x7279;&#x5B9A;&#x7684;&#x5143;&#x7D20;&#x8FD8;&#x5E94;&#x5177;&#x6709;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x503C;&#xFF0C;&#x5426;&#x5219; A &#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#x6765;&#x521B;&#x5EFA;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;One,Two,Three,Four&quot;     split(str, arr, &quot;,&quot;)     print &quot;Array contains following values&quot;     for (i in arr) {        print arr[i]    } }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Array contains following values One Two Three Four</code></td>
</tr>
<tr>
<td style="text-align:left">tolower( String )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; String &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x6BCF;&#x4E2A;&#x5927;&#x5199;&#x5B57;&#x7B26;&#x5C06;&#x66F4;&#x6539;&#x4E3A;&#x5C0F;&#x5199;&#x3002;&#x5927;&#x5199;&#x548C;&#x5C0F;&#x5199;&#x7684;&#x6620;&#x5C04;&#x7531;&#x5F53;&#x524D;&#x8BED;&#x8A00;&#x73AF;&#x5883;&#x7684; LC_CTYPE &#x8303;&#x7574;&#x5B9A;&#x4E49;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;HELLO, WORLD !!!&quot;     print &quot;Lowercase string = &quot; tolower(str) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Lowercase string = hello, world !!!</code></td>
</tr>
<tr>
<td style="text-align:left">toupper( String )</td>
<td style="text-align:left">&#x8FD4;&#x56DE; String &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x6BCF;&#x4E2A;&#x5C0F;&#x5199;&#x5B57;&#x7B26;&#x5C06;&#x66F4;&#x6539;&#x4E3A;&#x5927;&#x5199;&#x3002;&#x5927;&#x5199;&#x548C;&#x5C0F;&#x5199;&#x7684;&#x6620;&#x5C04;&#x7531;&#x5F53;&#x524D;&#x8BED;&#x8A00;&#x73AF;&#x5883;&#x7684; LC_CTYPE &#x8303;&#x7574;&#x5B9A;&#x4E49;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = &quot;hello, world !!!&quot;     print &quot;Uppercase string = &quot; toupper(str) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Uppercase string = HELLO, WORLD !!!</code></td>
</tr>
<tr>
<td style="text-align:left">sprintf(Format, Expr, Expr, . . . )</td>
<td style="text-align:left">&#x6839;&#x636E; Format &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684; printf &#x5B50;&#x4F8B;&#x7A0B;&#x683C;&#x5F0F;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x683C;&#x5F0F;&#x5316; Expr &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x5E76;&#x8FD4;&#x56DE;&#x6700;&#x540E;&#x751F;&#x6210;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    str = sprintf(&quot;%s&quot;, &quot;Hello, World !!!&quot;)     print str }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Hello, World !!!</code></td>
</tr>
<tr>
<td style="text-align:left">strtonum(str)</td>
<td style="text-align:left">strtonum &#x5C06;&#x5B57;&#x7B26;&#x4E32; str &#x8F6C;&#x6362;&#x4E3A;&#x6570;&#x503C;&#x3002; &#x5982;&#x679C;&#x5B57;&#x7B26;&#x4E32;&#x4EE5; 0 &#x5F00;&#x59CB;&#xFF0C;&#x5219;&#x5C06;&#x5176;&#x5F53;&#x4F5C;&#x5341;&#x8FDB;&#x5236;&#x6570;&#xFF1B;&#x5982;&#x679C;&#x5B57;&#x7B26;&#x4E32;&#x4EE5; 0x &#x6216; 0X &#x5F00;&#x59CB;&#xFF0C;&#x5219;&#x5C06;&#x5176;&#x5F53;&#x4F5C;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x6570;&#xFF1B;&#x5426;&#x5219;&#xFF0C;&#x5C06;&#x5176;&#x5F53;&#x4F5C;&#x6D6E;&#x70B9;&#x6570;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    print &quot;Decimal num = &quot; strtonum(&quot;123&quot;)    print &quot;Octal num = &quot; strtonum(&quot;0123&quot;)    print &quot;Hexadecimal num = &quot; strtonum(&quot;0x123&quot;) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Decimal num = 123 Octal num = 83 Hexadecimal num = 291</code></td>
</tr>
</tbody>
</table>
<p><strong>&#x6CE8;&#xFF1A;**</strong>Ere** &#x90E8;&#x5206;&#x53EF;&#x4EE5;&#x662F;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</p>
<p><strong>1&#x3001;gsub&#x3001;sub &#x4F7F;&#x7528;</strong></p>
<pre><code>$ awk &apos;BEGIN{info=&quot;this is a test2012test!&quot;;gsub(/[0-9]+/,&quot;||&quot;,info);print info}&apos;
this is a test||test!
</code></pre><p><strong>2&#x3001;&#x67E5;&#x627E;&#x5B57;&#x7B26;&#x4E32;&#xFF08;index &#x4F7F;&#x7528;&#xFF09;</strong></p>
<p>&#x4F7F;&#x7528;&#x4E86;&#x4E09;&#x5143;&#x8FD0;&#x7B97;&#x7B26;: <strong>&#x8868;&#x8FBE;&#x5F0F; ? &#x52A8;&#x4F5C;1 : &#x52A8;&#x4F5C;2</strong></p>
<pre><code>$ awk &apos;BEGIN{info=&quot;this is a test2012test!&quot;;print index(info,&quot;11111&quot;)?&quot;ok&quot;:&quot;no found&quot;;}&apos;
no found
$ awk &apos;BEGIN{info=&quot;this is a test2012test!&quot;;print index(info,&quot;is&quot;)?&quot;ok&quot;:&quot;no found&quot;;}&apos;
ok
$ awk &apos;BEGIN{info=&quot;this is a test2012test!&quot;;print index(info,&quot;test&quot;)?&quot;ok&quot;:&quot;no found&quot;;}&apos;
ok
</code></pre><p><strong>3&#x3001;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5339;&#x914D;&#x67E5;&#x627E;(match &#x4F7F;&#x7528;&#xFF09;</strong></p>
<pre><code>$ awk &apos;BEGIN{info=&quot;this is a test2012test!&quot;;print match(info,/[0-9]+/)?&quot;ok&quot;:&quot;no found&quot;;}&apos;
ok
</code></pre><p><strong>4&#x3001;&#x622A;&#x53D6;&#x5B57;&#x7B26;&#x4E32;(substr&#x4F7F;&#x7528;&#xFF09;</strong></p>
<p>&#x4ECE;&#x7B2C; 4 &#x4E2A; &#x5B57;&#x7B26;&#x5F00;&#x59CB;&#xFF0C;&#x622A;&#x53D6; 10 &#x4E2A;&#x957F;&#x5EA6;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<pre><code>$ awk &apos;BEGIN{info=&quot;this is a test2012test!&quot;;print substr(info,4,10);}&apos;
s is a tes
</code></pre><p><strong>5&#x3001;&#x5B57;&#x7B26;&#x4E32;&#x5206;&#x5272;&#xFF08;split&#x4F7F;&#x7528;&#xFF09;</strong></p>
<pre><code>$ awk &apos;BEGIN{info=&quot;this is a test&quot;;split(info,tA,&quot; &quot;);print length(tA);for(k in tA){print k,tA[k];}}&apos;
4
2 is
3 a
4 test
1 this
</code></pre><p>&#x5206;&#x5272; info&#xFF0C;&#x5C06; info &#x5B57;&#x7B26;&#x4E32;&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#x5207;&#x5206;&#x4E3A;&#x52A8;&#x6001;&#x6570;&#x7EC4; tA&#x3002;&#x6CE8;&#x610F; awk for &#x2026;in &#x5FAA;&#x73AF;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x5E8F;&#x7684;&#x5FAA;&#x73AF;&#x3002; &#x5E76;&#x4E0D;&#x662F;&#x4ECE;&#x6570;&#x7EC4;&#x4E0B;&#x6807; 1&#x2026;n &#xFF0C;&#x56E0;&#x6B64;&#x4F7F;&#x7528;&#x65F6;&#x5019;&#x9700;&#x8981;&#x7279;&#x522B;&#x6CE8;&#x610F;&#x3002;</p>
<h3 id="&#x65F6;&#x95F4;&#x51FD;&#x6570;"><a name="&#x65F6;&#x95F4;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x65F6;&#x95F4;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>4.5.3. &#x65F6;&#x95F4;&#x51FD;&#x6570;</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>&#x51FD;&#x6570;&#x540D;</strong></th>
<th style="text-align:left"><strong>&#x8BF4;&#x660E;</strong></th>
<th style="text-align:left"><strong>&#x5B9E;&#x4F8B;</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">mktime( YYYY MM DD HH MM SS[ DST])</td>
<td style="text-align:left">&#x751F;&#x6210;&#x65F6;&#x95F4;&#x683C;&#x5F0F;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    print &quot;Number of seconds since the Epoch = &quot; mktime(&quot;2014 12 14 30 20 10&quot;) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Number of seconds since the Epoch = 1418604610</code></td>
</tr>
<tr>
<td style="text-align:left">strftime([format [, timestamp]])</td>
<td style="text-align:left">&#x683C;&#x5F0F;&#x5316;&#x65F6;&#x95F4;&#x8F93;&#x51FA;&#xFF0C;&#x5C06;&#x65F6;&#x95F4;&#x6233;&#x8F6C;&#x4E3A;&#x65F6;&#x95F4;&#x5B57;&#x7B26;&#x4E32;  &#x5177;&#x4F53;&#x683C;&#x5F0F;&#xFF0C;&#x89C1;&#x4E0B;&#x8868;.</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    print strftime(&quot;Time = %m/%d/%Y %H:%M:%S&quot;, systime()) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Time = 12/14/2014 22:08:42</code></td>
</tr>
<tr>
<td style="text-align:left">systime()</td>
<td style="text-align:left">&#x5F97;&#x5230;&#x65F6;&#x95F4;&#x6233;,&#x8FD4;&#x56DE;&#x4ECE;1970&#x5E74;1&#x6708;1&#x65E5;&#x5F00;&#x59CB;&#x5230;&#x5F53;&#x524D;&#x65F6;&#x95F4;(&#x4E0D;&#x8BA1;&#x95F0;&#x5E74;)&#x7684;&#x6574;&#x79D2;&#x6570;</td>
<td style="text-align:left"><code>awk &apos;BEGIN{now=systime();print now}&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>1343210982</code></td>
</tr>
</tbody>
</table>
<p>strftime &#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#x683C;&#x5F0F;&#x8BF4;&#x660E;&#x7B26;:</p>
<table>
<thead>
<tr>
<th style="text-align:left">&#x5E8F;&#x53F7;</th>
<th style="text-align:left">&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">%a</td>
<td style="text-align:left">&#x661F;&#x671F;&#x7F29;&#x5199;(Mon-Sun)&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%A</td>
<td style="text-align:left">&#x661F;&#x671F;&#x5168;&#x79F0;&#xFF08;Monday-Sunday&#xFF09;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%b</td>
<td style="text-align:left">&#x6708;&#x4EFD;&#x7F29;&#x5199;&#xFF08;Jan&#xFF09;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%B</td>
<td style="text-align:left">&#x6708;&#x4EFD;&#x5168;&#x79F0;&#xFF08;January&#xFF09;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%c</td>
<td style="text-align:left">&#x672C;&#x5730;&#x65E5;&#x671F;&#x4E0E;&#x65F6;&#x95F4;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%C</td>
<td style="text-align:left">&#x5E74;&#x4EFD;&#x4E2D;&#x7684;&#x4E16;&#x7EAA;&#x90E8;&#x5206;&#xFF0C;&#x5176;&#x503C;&#x4E3A;&#x5E74;&#x4EFD;&#x6574;&#x9664;100&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%d</td>
<td style="text-align:left">&#x5341;&#x8FDB;&#x5236;&#x65E5;&#x671F;(01-31)</td>
</tr>
<tr>
<td style="text-align:left">%D</td>
<td style="text-align:left">&#x7B49;&#x4EF7;&#x4E8E; %m/%d/%y.</td>
</tr>
<tr>
<td style="text-align:left">%e</td>
<td style="text-align:left">&#x65E5;&#x671F;&#xFF0C;&#x5982;&#x679C;&#x53EA;&#x6709;&#x4E00;&#x4F4D;&#x6570;&#x5B57;&#x5219;&#x7528;&#x7A7A;&#x683C;&#x8865;&#x9F50;</td>
</tr>
<tr>
<td style="text-align:left">%F</td>
<td style="text-align:left">&#x7B49;&#x4EF7;&#x4E8E; %Y-%m-%d&#xFF0C;&#x8FD9;&#x4E5F;&#x662F; ISO 8601 &#x6807;&#x51C6;&#x65E5;&#x671F;&#x683C;&#x5F0F;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%g</td>
<td style="text-align:left">ISO8610 &#x6807;&#x51C6;&#x5468;&#x6240;&#x5728;&#x7684;&#x5E74;&#x4EFD;&#x6A21;&#x9664; 100&#xFF08;00-99)&#x3002;&#x6BD4;&#x5982;&#xFF0C;1993 &#x5E74; 1 &#x6708; 1 &#x65E5;&#x5C5E;&#x4E8E; 1992 &#x5E74;&#x7684;&#x7B2C; 53 &#x5468;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x867D;&#x7136;&#x5B83;&#x662F; 1993 &#x5E74;&#x7B2C; 1 &#x5929;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x3000;ISO8601 &#x6807;&#x51C6;&#x5468;&#x6240;&#x5728;&#x5E74;&#x4EFD;&#x5374;&#x662F; 1992&#x3002;&#x540C;&#x6837;&#xFF0C;&#x5C3D;&#x7BA1; 1973 &#x5E74; 12 &#x6708; 31 &#x65E5;&#x5C5E;&#x4E8E; 1973 &#x5E74;&#x4F46;&#x662F;&#x5B83;&#x5374;&#x5C5E;&#x4E8E; 1994 &#x5E74;&#x7684;&#x7B2C;&#x4E00;&#x5468;&#x3002;&#x6240;&#x4EE5; 1973 &#x5E74; 12 &#x6708; 31 &#x65E5;&#x7684; ISO8610&#x3000;&#x6807;&#x51C6;&#x5468;&#x6240;&#x5728;&#x7684;&#x5E74;&#x662F; 1974 &#x800C;&#x4E0D;&#x662F; 1973&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%G</td>
<td style="text-align:left">ISO &#x6807;&#x51C6;&#x5468;&#x6240;&#x5728;&#x5E74;&#x4EFD;&#x7684;&#x5168;&#x79F0;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%h</td>
<td style="text-align:left">&#x7B49;&#x4EF7;&#x4E8E; %b.</td>
</tr>
<tr>
<td style="text-align:left">%H</td>
<td style="text-align:left">&#x7528;&#x5341;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x7684; 24 &#x5C0F;&#x65F6;&#x683C;&#x5F0F;&#x7684;&#x5C0F;&#x65F6;(00-23)</td>
</tr>
<tr>
<td style="text-align:left">%I</td>
<td style="text-align:left">&#x7528;&#x5341;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x7684; 12 &#x5C0F;&#x65F6;&#x683C;&#x5F0F;&#x7684;&#x5C0F;&#x65F6;&#xFF08;00-12&#xFF09;</td>
</tr>
<tr>
<td style="text-align:left">%j</td>
<td style="text-align:left">&#x4E00;&#x5E74;&#x4E2D;&#x7684;&#x7B2C;&#x51E0;&#x5929;&#xFF08;001-366&#xFF09;</td>
</tr>
<tr>
<td style="text-align:left">%m</td>
<td style="text-align:left">&#x6708;&#x4EFD;&#xFF08;01-12&#xFF09;</td>
</tr>
<tr>
<td style="text-align:left">%M</td>
<td style="text-align:left">&#x5206;&#x949F;&#x6570;&#xFF08;00-59)</td>
</tr>
<tr>
<td style="text-align:left">%n</td>
<td style="text-align:left">&#x6362;&#x884C;&#x7B26; (ASCII LF)</td>
</tr>
<tr>
<td style="text-align:left">%p</td>
<td style="text-align:left">&#x5341;&#x4E8C;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x6CD5;&#xFF08;AM/PM&#xFF09;</td>
</tr>
<tr>
<td style="text-align:left">%r</td>
<td style="text-align:left">&#x5341;&#x4E8C;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#xFF08;&#x7B49;&#x4EF7;&#x4E8E; %I:%M:%S %p&#xFF09;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%R</td>
<td style="text-align:left">&#x7B49;&#x4EF7;&#x4E8E; %H:%M&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%S</td>
<td style="text-align:left">&#x65F6;&#x95F4;&#x7684;&#x79D2;&#x6570;&#x503C;&#xFF08;00-60&#xFF09;</td>
</tr>
<tr>
<td style="text-align:left">%t</td>
<td style="text-align:left">&#x5236;&#x8868;&#x7B26; (tab)</td>
</tr>
<tr>
<td style="text-align:left">%T</td>
<td style="text-align:left">&#x7B49;&#x4EF7;&#x4E8E; %H:%M:%S&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%u</td>
<td style="text-align:left">&#x4EE5;&#x6570;&#x5B57;&#x8868;&#x793A;&#x7684;&#x661F;&#x671F;(1-7),1 &#x8868;&#x793A;&#x661F;&#x671F;&#x4E00;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%U</td>
<td style="text-align:left">&#x4E00;&#x5E74;&#x4E2D;&#x7684;&#x7B2C;&#x51E0;&#x4E2A;&#x661F;&#x671F;&#xFF08;&#x7B2C;&#x4E00;&#x4E2A;&#x661F;&#x671F;&#x5929;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x5468;&#x7684;&#x5F00;&#x59CB;&#xFF09;&#xFF0C;00-53</td>
</tr>
<tr>
<td style="text-align:left">%V</td>
<td style="text-align:left">&#x4E00;&#x5E74;&#x4E2D;&#x7684;&#x7B2C;&#x51E0;&#x4E2A;&#x661F;&#x671F;&#xFF08;&#x7B2C;&#x4E00;&#x4E2A;&#x661F;&#x671F;&#x4E00;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x5468;&#x7684;&#x5F00;&#x59CB;&#xFF09;&#xFF0C;01-53&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%w</td>
<td style="text-align:left">&#x4EE5;&#x6570;&#x5B57;&#x8868;&#x793A;&#x7684;&#x661F;&#x671F;&#xFF08;0-6&#xFF09;&#xFF0C;0&#x8868;&#x793A;&#x661F;&#x671F;&#x65E5; &#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%W</td>
<td style="text-align:left">&#x5341;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x7684;&#x4E00;&#x5E74;&#x4E2D;&#x7684;&#x7B2C;&#x51E0;&#x4E2A;&#x661F;&#x671F;&#xFF08;&#x7B2C;&#x4E00;&#x4E2A;&#x661F;&#x671F;&#x4E00;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x5468;&#x7684;&#x5F00;&#x59CB;&#xFF09;&#xFF0C;00-53&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%x</td>
<td style="text-align:left">&#x672C;&#x5730;&#x65E5;&#x671F;&#x8868;&#x793A;</td>
</tr>
<tr>
<td style="text-align:left">%X</td>
<td style="text-align:left">&#x672C;&#x5730;&#x65F6;&#x95F4;&#x8868;&#x793A;</td>
</tr>
<tr>
<td style="text-align:left">%y</td>
<td style="text-align:left">&#x5E74;&#x4EFD;&#x6A21;&#x9664; 100&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%Y</td>
<td style="text-align:left">&#x5341;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x7684;&#x5B8C;&#x6574;&#x5E74;&#x4EFD;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">%z</td>
<td style="text-align:left">&#x65F6;&#x533A;&#xFF0C;&#x8868;&#x793A;&#x683C;&#x5F0F;&#x4E3A;+HHMM&#xFF08;&#x4F8B;&#x5982;&#xFF0C;&#x683C;&#x5F0F;&#x8981;&#x6C42;&#x751F;&#x6210;&#x7684; RFC 822&#x6216;&#x8005; RFC 1036 &#x65F6;&#x95F4;&#x5934;&#xFF09;</td>
</tr>
<tr>
<td style="text-align:left">%Z</td>
<td style="text-align:left">&#x65F6;&#x533A;&#x540D;&#x79F0;&#x6216;&#x7F29;&#x5199;&#xFF0C;&#x5982;&#x679C;&#x65F6;&#x533A;&#x5F85;&#x5B9A;&#x5219;&#x65E0;&#x8F93;&#x51FA;&#x3002;</td>
</tr>
</tbody>
</table>
<h3 id="&#x4F4D;&#x64CD;&#x4F5C;&#x51FD;&#x6570;"><a name="&#x4F4D;&#x64CD;&#x4F5C;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x4F4D;&#x64CD;&#x4F5C;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>4.5.4. &#x4F4D;&#x64CD;&#x4F5C;&#x51FD;&#x6570;</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>&#x51FD;&#x6570;&#x540D;</strong></th>
<th style="text-align:left"><strong>&#x8BF4;&#x660E;</strong></th>
<th style="text-align:left"><strong>&#x5B9E;&#x4F8B;</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">and</td>
<td style="text-align:left">&#x4F4D;&#x4E0E;&#x64CD;&#x4F5C;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    num1 = 10    num2 = 6     printf &quot;(%d AND %d) = %d\n&quot;, num1, num2, and(num1, num2) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>(10 AND 6) = 2</code></td>
</tr>
<tr>
<td style="text-align:left">compl</td>
<td style="text-align:left">&#x6309;&#x4F4D;&#x6C42;&#x8865;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    num1 = 10     printf &quot;compl(%d) = %d\n&quot;, num1, compl(num1) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>compl(10) = 9007199254740981</code></td>
</tr>
<tr>
<td style="text-align:left">lshift</td>
<td style="text-align:left">&#x5DE6;&#x79FB;&#x4F4D;&#x64CD;&#x4F5C;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    num1 = 10     printf &quot;lshift(%d) by 1 = %d\n&quot;, num1, lshift(num1, 1) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>lshift(10) by 1 = 20</code></td>
</tr>
<tr>
<td style="text-align:left">rshift</td>
<td style="text-align:left">&#x53F3;&#x79FB;&#x4F4D;&#x64CD;&#x4F5C;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    num1 = 10     printf &quot;rshift(%d) by 1 = %d\n&quot;, num1, rshift(num1, 1) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>rshift(10) by 1 = 5</code></td>
</tr>
<tr>
<td style="text-align:left">or</td>
<td style="text-align:left">&#x6309;&#x4F4D;&#x6216;&#x64CD;&#x4F5C;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    num1 = 10    num2 = 6     printf &quot;(%d OR %d) = %d\n&quot;, num1, num2, or(num1, num2) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>(10 OR 6) = 14</code></td>
</tr>
<tr>
<td style="text-align:left">xor</td>
<td style="text-align:left">&#x6309;&#x4F4D;&#x5F02;&#x6216;&#x64CD;&#x4F5C;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    num1 = 10    num2 = 6     printf &quot;(%d XOR %d) = %d\n&quot;, num1, num2, xor(num1, num2) }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>(10 bitwise xor 6) = 12</code></td>
</tr>
</tbody>
</table>
<h3 id="&#x5176;&#x4ED6;&#x51FD;&#x6570;"><a name="&#x5176;&#x4ED6;&#x51FD;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x5176;&#x4ED6;&#x51FD;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>4.5.5. &#x5176;&#x4ED6;&#x51FD;&#x6570;</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>&#x51FD;&#x6570;&#x540D;</strong></th>
<th style="text-align:left"><strong>&#x8BF4;&#x660E;</strong></th>
<th style="text-align:left"><strong>&#x5B9E;&#x4F8B;</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">close(expr)</td>
<td style="text-align:left">&#x5173;&#x95ED;&#x7BA1;&#x9053;&#x7684;&#x6587;&#x4EF6;</td>
<td style="text-align:left">`$ awk &apos;BEGIN {    cmd = &quot;tr [a-z] [A-Z]&quot;    print &quot;hello, world !!!&quot;</td>
<td>&amp; cmd    close(cmd, &quot;to&quot;)    cmd</td>
<td>&amp; getline out    print out;    close(cmd); }&apos;<code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</code>HELLO, WORLD !!!`&#x7B2C;&#x4E00;&#x6761;&#x8BED;&#x53E5; cmd = &quot;tr [a-z] [A-Z]&quot; &#x5728;&#x3000;AWK &#x4E2D;&#x5EFA;&#x7ACB;&#x4E86;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x7684;&#x901A;&#x4FE1;&#x901A;&#x9053;&#x3002;&#x7B2C;&#x4E8C;&#x6761;&#x8BED;&#x53E5; print &#x4E3A; tr &#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x8F93;&#x5165;&#x3002;&amp;\</td>
<td>&#x8868;&#x793A;&#x53CC;&#x5411;&#x901A;&#x4FE1;&#x3002;&#x7B2C;&#x4E09;&#x6761;&#x8BED;&#x53E5; close(cmd, &quot;to&quot;) &#x5B8C;&#x6210;&#x6267;&#x884C;&#x540E;&#x5173;&#x95ED; to &#x8FDB;&#x7A0B;&#x3002;&#x7B2C;&#x56DB;&#x6761;&#x8BED;&#x53E5; cmd \</td>
<td>&amp; getline out &#x4F7F;&#x7528; getline &#x51FD;&#x6570;&#x5C06;&#x8F93;&#x51FA;&#x5B58;&#x50A8;&#x5230; out &#x53D8;&#x91CF;&#x4E2D;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x8F93;&#x51FA;&#x8BED;&#x53E5;&#x6253;&#x5370;&#x8F93;&#x51FA;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6700;&#x540E; close &#x51FD;&#x6570;&#x5173;&#x95ED; cmd&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">delete</td>
<td style="text-align:left">&#x7528;&#x4E8E;&#x4ECE;&#x6570;&#x7EC4;&#x4E2D;&#x5220;&#x9664;&#x5143;&#x7D20;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    arr[0] = &quot;One&quot;    arr[1] = &quot;Two&quot;    arr[2] = &quot;Three&quot;    arr[3] = &quot;Four&quot;     print &quot;Array elements before delete operation:&quot;    for (i in arr) {        print arr[i]    }     delete arr[0]    delete arr[1]     print &quot;Array elements after delete operation:&quot;    for (i in arr) {        print arr[i]    } }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Array elements before delete operation: One Two Three Four Array elements after delete operation: Three Four</code></td>
</tr>
<tr>
<td style="text-align:left">exit</td>
<td style="text-align:left">&#x7EC8;&#x6B62;&#x811A;&#x672C;&#x6267;&#x884C;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x53EF;&#x9009;&#x7684;&#x53C2;&#x6570; expr &#x4F20;&#x9012; AWK &#x8FD4;&#x56DE;&#x72B6;&#x6001;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN {    print &quot;Hello, World !!!&quot;     exit 10     print &quot;AWK never executes this statement.&quot; }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Hello, World !!!</code></td>
</tr>
<tr>
<td style="text-align:left">flush</td>
<td style="text-align:left">&#x5237;&#x65B0;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x6216;&#x7BA1;&#x9053;&#x7684;&#x7F13;&#x51B2;&#x533A;</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">getline</td>
<td style="text-align:left">&#x8BFB;&#x5165;&#x4E0B;&#x4E00;&#x884C;</td>
<td style="text-align:left">&#x4F7F;&#x7528; getline &#x4ECE;&#x6587;&#x4EF6; marks.txt &#x4E2D;&#x8BFB;&#x5165;&#x4E00;&#x884C;&#x5E76;&#x8F93;&#x51FA;&#xFF1A;<code>$ awk &apos;{getline; print $0}&apos; marks.txt</code>&#xFF0C;AWK &#x4ECE;&#x6587;&#x4EF6; marks.txt &#x4E2D;&#x8BFB;&#x5165;&#x4E00;&#x884C;&#x5B58;&#x50A8;&#x5230;&#x53D8;&#x91CF; 0 &#x4E2D;&#x3002;&#x5728;&#x4E0B;&#x4E00;&#x6761;&#x8BED;&#x53E5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; getline &#x8BFB;&#x5165;&#x4E0B;&#x4E00;&#x884C;&#x3002;&#x56E0;&#x6B64;AWK&#x8BFB;&#x5165;&#x7B2C;&#x4E8C;&#x884C;&#x5E76;&#x5B58;&#x50A8;&#x5230; 0 &#x4E2D;&#x3002;&#x6700;&#x540E;&#xFF0C;AWK &#x4F7F;&#x7528; print &#x8F93;&#x51FA;&#x7B2C;&#x4E8C;&#x884C;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E00;&#x76F4;&#x5230;&#x6587;&#x4EF6;&#x7ED3;&#x675F;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">next</td>
<td style="text-align:left">&#x505C;&#x6B62;&#x5904;&#x7406;&#x5F53;&#x524D;&#x8BB0;&#x5F55;&#xFF0C;&#x5E76;&#x4E14;&#x8FDB;&#x5165;&#x5230;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x3002;</td>
<td style="text-align:left">&#x5F53;&#x6A21;&#x5F0F;&#x4E32;&#x5339;&#x914D;&#x6210;&#x529F;&#x540E;&#x7A0B;&#x5E8F;&#x5E76;&#x4E0D;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#xFF1A;<code>$ awk &apos;{if ($0 ~/Shyam/) next; print $0}&apos; marks.txt</code></td>
</tr>
<tr>
<td style="text-align:left">nextfile</td>
<td style="text-align:left">&#x505C;&#x6B62;&#x5904;&#x7406;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#xFF0C;&#x4ECE;&#x4E0B;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x4E2A;&#x8BB0;&#x5F55;&#x5F00;&#x59CB;&#x5904;&#x7406;&#x3002;</td>
<td style="text-align:left">&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x3002; file1.txt &#x5185;&#x5BB9;&#x5982;&#x4E0B;:<code>file1:str1 file1:str2 file1:str3 file1:str4</code>&#x6587;&#x4EF6; file2.txt &#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;<code>file2:str1 file2:str2 file2:str3 file2:str4</code>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6765;&#x6D4B;&#x8BD5; nextfile &#x51FD;&#x6570;&#x3002;<code>$ awk &apos;{ if ($0 ~ /file1:str2/) nextfile; print $0 }&apos; file1.txt file2.txt</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>file1:str1 file2:str1 file2:str2 file2:str3 file2:str4</code></td>
</tr>
<tr>
<td style="text-align:left">return</td>
<td style="text-align:left">&#x4ECE;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x51FD;&#x6570;&#x4E2D;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x662F;&#x672A;&#x5B9A;&#x4E49;&#x7684;&#x3002;</td>
<td style="text-align:left">&#x521B;&#x5EFA;&#x6587;&#x4EF6; functions.awk&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;<code>function addition(num1, num2) {    result = num1 + num2     return result } BEGIN {    res = addition(10, 20)    print &quot;10 + 20 = &quot; res }</code>&#x6267;&#x884C;&#x8BE5;&#x6587;&#x4EF6;&#xFF1A;<code>$ awk -f functions.awk  10 + 20 = 30</code></td>
</tr>
<tr>
<td style="text-align:left">system</td>
<td style="text-align:left">&#x6267;&#x884C;&#x7279;&#x5B9A;&#x7684;&#x547D;&#x4EE4;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x5176;&#x9000;&#x51FA;&#x72B6;&#x6001;&#x3002;&#x8FD4;&#x56DE;&#x503C;&#x4E3A; 0 &#x8868;&#x793A;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x6210;&#x529F;&#xFF1B;&#x975E; 0 &#x8868;&#x793A;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x5931;&#x8D25;&#x3002;</td>
<td style="text-align:left"><code>$ awk &apos;BEGIN { ret = system(&quot;date&quot;); print &quot;Return value = &quot; ret }&apos;</code>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;<code>Sun Dec 21 23:16:07 IST 2014 Return value = 0</code></td>
</tr>
</tbody>
</table>
<footer class="page-footer-ex"> <span class="page-footer-ex-copyright"> Copyright &amp;copy <a href="https://github.com/xiao-xiaoming/LinuxStudy" target="_blank">xiao-xiaoming</a> 2019   </span> &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <span class="page-footer-ex-footer-update"> <strong> &#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A; </strong>   2019-11-25   </span> </footer>
<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="linux管道命令.html" class="navigation navigation-prev " aria-label="Previous page: linux管道命令">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="linux命令练习.html" class="navigation navigation-next " aria-label="Next page: linux命令练习">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"sed&awk","level":"1.8","depth":1,"next":{"title":"linux命令练习","level":"1.9","depth":1,"path":"linux命令练习.md","ref":"linux命令练习.md","articles":[]},"previous":{"title":"linux管道命令","level":"1.7","depth":1,"path":"linux管道命令.md","ref":"linux管道命令.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["code","github","anchor-navigation-ex","-lunr","-search","search-pro","splitter","insert-logo","custom-favicon","-sharing","sharing-plus","page-footer-ex","popup"],"pluginsConfig":{"github":{"url":"https://github.com/xiao-xiaoming/LinuxStudy"},"page-footer-ex":{"copyright":"Copyright &copy [xiao-xiaoming](https://github.com/xiao-xiaoming/LinuxStudy) 2019  ","markdown":true,"update_format":"  YYYY-MM-DD  ","update_label":"** 文件修订时间： **"},"splitter":{},"search-pro":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"popup":{},"code":{"copyButtons":true},"pdf":{"pageNumbers":true,"fontSize":18,"paperSize":"a5"},"fontsettings":{"theme":"white","family":"sans","size":1},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"favicon":"imgs/logo.ico","custom-favicon":{},"sharing":{"qq":true,"all":["facebook","google","twitter","weibo","qq","linkedin","qzone","douban"],"douban":false,"facebook":false,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":false,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":true,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"insert-logo":{"style":"background: none; max-height: 30px; min-height: 30px","url":"imgs/logo.ico"}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"sed&awk.md","mtime":"2019-11-25T14:39:50.434Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-11-26T08:18:03.708Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-insert-logo/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

